(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{722:function(e,t,c){"use strict";c.d(t,"c",(function(){return n})),c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return r}));var n=function(e){return new Date(e).toLocaleString()},a={convert:function(e){return e.constructor===Date?e:e.constructor===Array?new Date(e[0],e[1],e[2]):e.constructor===Number||e.constructor===String?new Date(e):"object"===typeof e?new Date(e.year,e.month,e.date):NaN},compare:function(e,t){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())?(e>t)-(e<t):NaN},inRange:function(e,t,c){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())&&isFinite(c=this.convert(c).valueOf())?t<=e&&e<=c:NaN}},r=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}},723:function(e,t,c){"use strict";function n(e,t,c,n,a,r,i){try{var s=e[r](i),o=s.value}catch(l){return void c(l)}s.done?t(o):Promise.resolve(o).then(n,a)}function a(e){return function(){var t=this,c=arguments;return new Promise((function(a,r){var i=e.apply(t,c);function s(e){n(i,a,r,s,o,"next",e)}function o(e){n(i,a,r,s,o,"throw",e)}s(void 0)}))}}c.d(t,"a",(function(){return a}))},724:function(e,t,c){"use strict";c(1);var n=c(89),a=c(22);t.a=function(e){var t=e.keyword,c=void 0===t?"":t,r=e.changeKeyword,i=void 0===r?null:r,s=e.children;return Object(a.jsxs)(n.T,{className:"align-items-center justify-content-between pb-2",children:[Object(a.jsx)(n.l,{sm:"4",children:Object(a.jsx)(n.x,{className:"mb-0",children:Object(a.jsx)(n.B,{type:"text",name:"nf-text",placeholder:"Search Here..",autoComplete:"off",value:c,onChange:i,onKeyPress:i})})}),Object(a.jsx)(n.l,{sm:"4",className:"d-flex justify-content-end",children:s})]})}},858:function(e,t,c){"use strict";c.r(t);var n=c(82),a=c(1),r=c.n(a),i=c(720),s=c(724),o=c(725),l=c.n(o),d=c(723),u=c(195),j=c(63),m=c(726),h=c(89),b=c(719),p=c(22),x=function(e){var t=e.show,c=e.setShow,a=e.refetch,s=e.itemId,o=e.setEditId,x=r.a.useState(""),O=Object(n.a)(x,2),v=O[0],f=O[1],g=r.a.useState([]),y=Object(n.a)(g,2),w=y[0],k=y[1],N=r.a.useState([]),I=Object(n.a)(N,2),C=I[0],S=I[1],T=r.a.useState([]),E=Object(n.a)(T,2),P=E[0],F=E[1],G=r.a.useState({name:"",description:"",price:"",petTypeId:"",serviceId:"",items:[],active:!0}),D=Object(n.a)(G,2),A=D[0],L=D[1],B=Object(i.a)({url:b.a+"/packages",method:"POST"},{manual:!0}),K=Object(n.a)(B,2),M=K[0].loading,R=K[1],U=Object(i.a)({url:b.a+"/items",method:"GET"},{manual:!0}),z=Object(n.a)(U,2)[1],J=function(e){L((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},e.target.name,"active"===e.target.name?e.target.checked:e.target.value))}))},H=r.a.useCallback(Object(d.a)(l.a.mark((function e(){var t,c,n,a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R({url:b.a+"/services",method:"GET"});case 2:return r=e.sent,k((null===(t=r)||void 0===t||null===(c=t.data)||void 0===c?void 0:c.rows)||[]),e.next=6,R({url:b.a+"/pet-types",method:"GET"});case 6:if(r=e.sent,S((null===(n=r)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.rows)||[]),!s){e.next=15;break}return e.next=11,R({url:b.a+"/packages/".concat(s),method:"GET"});case 11:r=e.sent,i=r.data.PackageItems.map((function(e){return{label:e.Item.name,value:e.Item.id}})),F(i),L({name:r.data.name,description:r.data.description,price:r.data.price,petTypeId:r.data.petTypeId,serviceId:r.data.serviceId,items:i,active:r.data.active});case 15:case"end":return e.stop()}}),e)}))),[R,s]);return r.a.useEffect((function(){t&&H()}),[t,H]),r.a.useEffect((function(){console.log(v),t&&z({params:{search:v}}).then((function(e){var t;F(((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[]).map((function(e){return{label:e.name,value:e.id}})))}))}),[v,z,t]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(h.K,{show:t,onClose:function(){return c(!1)},children:[Object(p.jsx)(h.N,{closeButton:!0,children:"Add Package"}),Object(p.jsx)(h.L,{children:M?Object(p.jsx)("div",{className:"py-5 text-center",children:"Loading Details ..."}):Object(p.jsx)(h.T,{children:Object(p.jsxs)(h.l,{className:"px-5 pt-4",children:[Object(p.jsxs)(h.x,{row:!0,children:[Object(p.jsx)(h.l,{md:"3",children:Object(p.jsx)(h.G,{className:"pt-1",htmlFor:"text-name",children:"Name"})}),Object(p.jsx)(h.l,{xs:"12",md:"9",children:Object(p.jsx)(h.B,{id:"text-name",name:"name",value:A.name,onChange:J,placeholder:"Enter Name for item"})})]}),Object(p.jsxs)(h.x,{row:!0,children:[Object(p.jsx)(h.l,{md:"3",children:Object(p.jsx)(h.G,{className:"pt-1",htmlFor:"text-price",children:"Price"})}),Object(p.jsx)(h.l,{xs:"12",md:"9",children:Object(p.jsx)(h.B,{id:"text-price",name:"price",value:A.price,onChange:J,placeholder:"Enter Price for item"})})]}),Object(p.jsxs)(h.x,{row:!0,children:[Object(p.jsx)(h.l,{md:"3",children:Object(p.jsx)(h.G,{className:"pt-1",htmlFor:"text-pet-type",children:"Pet Type"})}),Object(p.jsx)(h.l,{xs:"12",md:"9",children:Object(p.jsxs)(h.U,{custom:!0,name:"petTypeId",id:"text-pet-type",onChange:J,value:A.petTypeId,children:[Object(p.jsx)("option",{value:"0",children:"Select"}),C.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]}),Object(p.jsxs)(h.x,{row:!0,children:[Object(p.jsx)(h.l,{md:"3",children:Object(p.jsx)(h.G,{className:"pt-1",htmlFor:"text-service",children:"Service"})}),Object(p.jsx)(h.l,{xs:"12",md:"9",children:Object(p.jsxs)(h.U,{custom:!0,name:"serviceId",id:"text-service",onChange:J,value:A.serviceId,children:[Object(p.jsx)("option",{value:"0",children:"Select"}),w.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.displayName},e.id)}))]})})]}),Object(p.jsxs)(h.x,{row:!0,children:[Object(p.jsx)(h.l,{md:"3",children:Object(p.jsx)(h.G,{className:"pt-1",htmlFor:"text-service",children:"Items"})}),Object(p.jsx)(h.l,{xs:"12",md:"9",children:Object(p.jsx)(m.a,{onChange:function(e){L((function(t){return Object(j.a)(Object(j.a)({},t),{},{items:e})}))},name:"itemIds",isMulti:!0,options:P,value:A.items,onInputChange:function(e){return f(e)}})})]}),Object(p.jsxs)(h.x,{row:!0,children:[Object(p.jsx)(h.l,{md:"3",children:Object(p.jsx)(h.G,{className:"pt-1",htmlFor:"text-description",children:"Description"})}),Object(p.jsx)(h.l,{xs:"12",md:"9",children:Object(p.jsx)(h.fb,{id:"text-description",name:"description",value:A.description,onChange:J,placeholder:"Enter Description ..."})})]}),Object(p.jsxs)(h.x,{row:!0,children:[Object(p.jsx)(h.l,{xs:"3",md:"3",children:Object(p.jsx)(h.G,{htmlFor:"text-description",children:"Active"})}),Object(p.jsx)(h.l,{xs:"9",md:"9",children:Object(p.jsx)(h.eb,{color:"primary",name:"active",checked:A.active,onChange:J,variant:"opposite",shape:"pill"})})]})]})})}),Object(p.jsxs)(h.M,{children:[Object(p.jsx)(h.f,{color:"secondary",onClick:function(){return c(!1),L({name:"",description:"",price:"",petTypeId:"",serviceId:"",items:[],active:!0}),void o(null)},children:"Cancel"}),Object(p.jsx)(h.f,{onClick:function(){if(!M){var e={data:Object(j.a)(Object(j.a)({},A),{},{itemIds:A.items.map((function(e){return e.value}))})};delete e.data.items,s&&(e.url=b.a+"/packages/".concat(s),e.method="PUT"),R(e).then((function(e){c(!1),L({name:"",description:"",price:"",petTypeId:"",serviceId:"",items:[],active:!0}),o(null),a()}))}},className:"ml-1",color:"primary",children:M?"Loading":"Confirm"})]})]})})},O=c(722),v=c(194),f=["name","price",{key:"createdAt",label:"Registered"},"description","actions"];t.default=function(){var e=Object(a.useContext)(v.a),t=(e.addToast,e.role),c=r.a.useState(!1),o=Object(n.a)(c,2),l=o[0],d=o[1],u=r.a.useState(""),j=Object(n.a)(u,2),m=j[0],g=j[1],y=r.a.useState(1),w=Object(n.a)(y,2),k=w[0],N=w[1],I=r.a.useState(1),C=Object(n.a)(I,2),S=C[0],T=C[1],E=r.a.useState(null),P=Object(n.a)(E,2),F=P[0],G=P[1],D=Object(i.a)({url:b.a+"/packages",method:"GET",params:{pageNo:S}},{manual:!0}),A=Object(n.a)(D,2),L=A[0],B=L.data,K=L.loading,M=L.error,R=A[1],U=r.a.useCallback((function(){R().then((function(e){N(e.data.totalPages)}))}),[R]);return r.a.useEffect((function(){U()}),[U]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h.T,{children:Object(p.jsx)(h.l,{xs:"12",lg:"12",children:Object(p.jsxs)(h.g,{children:[Object(p.jsx)(h.k,{children:"Packages"}),Object(p.jsx)(h.h,{children:Object(p.jsx)(h.p,{items:K||M?[]:(null===B||void 0===B?void 0:B.rows)||[],fields:f,striped:!0,itemsPerPage:10,loading:K,overTableSlot:Object(p.jsx)(s.a,{keyword:m,changeKeyword:function(e){"Enter"===e.key?R({params:{search:m}}):g(e.target.value)},children:Object(p.jsx)(h.f,{color:"primary",variant:"outline",className:"m-2 pl-3 pr-4",onClick:function(){return d(!0)},children:Object(p.jsx)("span",{className:"ml-1",children:"Add Package"})})}),underTableSlot:Object(p.jsx)(h.R,{activePage:S,pages:k,onActivePageChange:function(e){return T(e)}}),scopedSlots:{createdAt:function(e){return Object(p.jsx)("td",{children:Object(O.c)(e.createdAt)})},actions:function(e){return Object(p.jsxs)("td",{children:[Object(p.jsx)(h.f,{onClick:function(){return t=e.id,G(t),void d(!0);var t},color:"primary",size:"sm",className:"mr-1",children:"Edit"}),"receptionist"!==t&&Object(p.jsx)(h.f,{onClick:function(){return t=e.id,void R({url:b.a+"/packages/".concat(t),method:"DELETE"}).then((function(){U()}));var t},color:"danger",size:"sm",children:"Delete"})]})}}})})]})})}),Object(p.jsx)(x,{show:l,setShow:d,refetch:R,itemId:F,setEditId:G})]})}}}]);
//# sourceMappingURL=12.8441a529.chunk.js.map