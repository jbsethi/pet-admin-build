{"version":3,"sources":["config/index.js","views/users/AddUser.js"],"names":["PUBLIC_API","PUBLIC_PATH","AddUser","match","history","useHistory","useAxios","url","params","id","method","manual","data","loading","executePost","userData","getUserDetails","React","useState","previewImg","setPreviewImg","emiratesId","role","name","email","contact","username","password","confirm_password","image","active","userRecord","setUserRecord","handleChange","e","oldState","target","checked","value","useEffect","push","xl","action","className","lg","row","sm","col","htmlFor","onChange","placeholder","custom","type","color","variant","shape","src","alt","width","reader","FileReader","file","files","onloadend","result","readAsDataURL","onClick","storeInfo","formData","obj","FormData","Object","keys","forEach","key","append","formDataObj"],"mappings":"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","file":"static/js/9.0b651300.chunk.js","sourcesContent":["export const PUBLIC_API = \"https://app.aloropivetcenter.com/api\"\nexport const PUBLIC_PATH = \"https://app.aloropivetcenter.com/public/\"","import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport useAxios from 'axios-hooks'\n\nimport { PUBLIC_API } from '../../config/index'\n\nimport {\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CRow,\n  CForm,\n  CFormGroup,\n  CLabel,\n  CInput,\n  CSelect,\n  CSwitch,\n  CMedia,\n  CMediaBody,\n  CCardFooter,\n  CButton\n} from '@coreui/react'\n\nconst defaultImageUrl = \"https://www.kindpng.com/picc/m/72-723761_student-png-sammilani-mahavidyalaya-undergraduate-and-dummy-user.png\"\n\nconst formDataObj = (obj) => {\n  const formData = new FormData()\n  Object.keys(obj).forEach(key => formData.append(key, obj[key]))\n  return formData\n}\n\nconst AddUser = ({ match }) => {\n  const history = useHistory()\n\n  const [\n    { data, loading },\n    executePost\n  ] = useAxios(\n    {\n      url: `https://app.aloropivetcenter.com/api/users${match?.params?.id ? '/' + match?.params?.id : ''}`,\n      method: match?.params?.id ? 'PUT' : 'POST'\n    },\n    { manual: true }\n  )\n\n  const [\n    { data: userData },\n    getUserDetails\n  ] = useAxios({\n    url: `${PUBLIC_API}/users/${match.params.id}`,\n    method: 'GET'\n  },\n  {\n    manual: true\n  })\n\n\n  \n  const [previewImg, setPreviewImg] = React.useState(null)\n  const [userRecord, setUserRecord] = React.useState({\n    emiratesId: '',\n    role: 1,\n    name: '',\n    email: '',\n    contact: '',\n    username: '',\n    password: '',\n    confirm_password: '',\n    image: '',\n    active: true\n  })\n\n  const handleChange = (e) => {\n    setUserRecord(oldState => {\n      return {\n        ...oldState,\n        [e.target.name]: e.target.name === 'active'? e.target.checked : e.target.value\n      }\n    })\n  }\n\n  const handleImageChange = (e) => {\n    let reader = new FileReader()\n    let file = e.target.files[0]\n\n    reader.onloadend = () => {\n      setUserRecord(oldState => {\n        return {\n          ...oldState,\n          image: file\n        }\n      })\n\n      setPreviewImg(reader.result)\n    }\n\n    reader.readAsDataURL(file)\n  }\n\n  const storeUserInfo = () => {\n    if (!loading) {\n      const storeInfo = {...userRecord}\n      if (match.params.id) {\n        delete storeInfo.password\n        delete storeInfo.confirm_password\n      }\n      const formData = formDataObj(storeInfo)\n      \n      executePost({\n        data: formData\n      })\n    }\n  }\n\n  const resetForm = () => {\n    setUserRecord(() => {\n      return {\n        emiratesId: '',\n        role: 1,\n        name: '',\n        email: '',\n        contact: '',\n        username: '',\n        password: '',\n        confirm_password: '',\n        image: '',\n        active: true\n      }\n    })\n\n    setPreviewImg(null)\n  }\n\n\n  React.useEffect(() => {\n    if (data) {\n      history.push('/users')\n    }\n  }, [data, history])\n\n  React.useEffect(() => {\n    if (userData) {\n      setUserRecord({\n        emiratesId: userData.emiratesId,\n        role: userData.role,\n        name: userData.name,\n        email: userData.email,\n        contact: userData.contact,\n        username: userData.username,\n        password: '',\n        confirm_password: '',\n        image: userData.image,\n        active: userData.active,\n      })\n    } else {\n      if (match?.params?.id) {\n        getUserDetails()\n      }\n    }\n  }, [userData, setUserRecord, getUserDetails, match])\n\n  return (\n    <CRow>\n      <CCol xl={12}>\n        <CCard>\n          <CCardHeader>\n            Add Users\n          </CCardHeader>\n          <CCardBody>\n            <CForm action=\"\" method=\"post\" className=\"form-horizontal\">\n              <CRow>\n                <CCol lg=\"7\">\n                  <CFormGroup row className=\"justify-content-center\">\n                    <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-emirates-id\">Emirates ID</CLabel>\n                    <CCol sm=\"6\">\n                      <CInput value={userRecord.emiratesId} onChange={handleChange} id=\"input-emirates-id\" name=\"emiratesId\" placeholder=\"Emirates ID\" />\n                    </CCol>\n                  </CFormGroup>\n                  <CFormGroup row className=\"justify-content-center\">\n                    <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-role\">Roles</CLabel>\n                    <CCol sm=\"6\">\n                      <CSelect value={userRecord.role} onChange={handleChange} custom name=\"role\" id=\"input-role\">\n                        <option value=\"1\">Administrator</option>\n                        <option value=\"2\">Receiptionist</option>\n                        <option value=\"3\">Doctor</option>\n                      </CSelect>\n                    </CCol>\n                  </CFormGroup>\n                  <CFormGroup row className=\"justify-content-center\">\n                    <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-name\">Name</CLabel>\n                    <CCol sm=\"6\">\n                      <CInput value={userRecord.name} onChange={handleChange} id=\"input-name\" name=\"name\" placeholder=\"Name\" />\n                    </CCol>\n                  </CFormGroup>\n                  <CFormGroup row className=\"justify-content-center\">\n                    <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-email\">Email</CLabel>\n                    <CCol sm=\"6\">\n                      <CInput value={userRecord.email} onChange={handleChange} id=\"input-email\" name=\"email\" placeholder=\"Email\" />\n                    </CCol>\n                  </CFormGroup>\n                  <CFormGroup row className=\"justify-content-center\">\n                    <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-contact\">Phone No</CLabel>\n                    <CCol sm=\"6\">\n                      <CInput value={userRecord.contact} onChange={handleChange} id=\"input-contact\" name=\"contact\" placeholder=\"Phone no\" />\n                    </CCol>\n                  </CFormGroup>\n                  <CFormGroup row className=\"justify-content-center\">\n                    <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-username\">Username</CLabel>\n                    <CCol sm=\"6\">\n                      <CInput value={userRecord.username} onChange={handleChange} id=\"input-username\" name=\"username\" placeholder=\"Username\" />\n                    </CCol>\n                  </CFormGroup>\n                  {\n                    !match?.params?.id &&\n                    <>\n                      <CFormGroup row className=\"justify-content-center\">\n                        <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-password\">Password</CLabel>\n                        <CCol sm=\"6\">\n                          <CInput value={userRecord.password} onChange={handleChange} id=\"input-password\" name=\"password\" placeholder=\"Password\" type=\"password\" />\n                        </CCol>\n                      </CFormGroup>\n                      <CFormGroup row className=\"justify-content-center\">\n                        <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-confirm-password\">Confirm Password</CLabel>\n                        <CCol sm=\"6\">\n                          <CInput value={userRecord.confirm_password} onChange={handleChange} id=\"input-confirm-password\" name=\"confirm_password\" placeholder=\"Password\" type=\"password\" />\n                        </CCol>\n                      </CFormGroup>\n                    </> \n                  }\n                  <CFormGroup row className=\"justify-content-center\">\n                    <CLabel className=\"text-right\" sm=\"3\" col htmlFor=\"input-active\">Active</CLabel>\n                    <CCol sm=\"6\">\n                      <CSwitch\n                        className=\"pt-1\"\n                        color=\"primary\"\n                        name=\"active\"\n                        checked={userRecord.active}\n                        onChange={handleChange}\n                        {\n                          ...({\n                            variant: 'opposite',\n                            shape:'pill'\n                          })\n                        }\n                      />\n                    </CCol>\n                  </CFormGroup>\n                </CCol>\n                <CCol lg=\"4\">\n                  <CMedia className=\"flex-column\">\n                    <img src={previewImg || defaultImageUrl} alt=\"preview\" width=\"100%\"/>\n                    <CMediaBody className=\"w-100 mt-4\">\n                      <CFormGroup row>\n                        <CCol sm=\"12\">\n                          <CInput onChange={handleImageChange} id=\"input-image\" name=\"image\" type=\"file\" />\n                        </CCol>\n                      </CFormGroup>\n\n                    </CMediaBody>\n                  </CMedia>\n                </CCol>\n              </CRow>\n            </CForm>\n          </CCardBody>\n          <CCardFooter>\n            <section className=\"text-right w-50 ml-auto\">\n              <CButton onClick={resetForm} color=\"danger\" className=\"mr-1 w-25\">\n                Clear\n              </CButton>\n              <CButton onClick={storeUserInfo} color=\"primary\" className=\"w-25\">\n                {loading ? 'Loading' : 'Submit'}\n              </CButton>\n            </section>\n          </CCardFooter>\n        </CCard>\n      </CCol>\n    </CRow>\n  )\n}\n\nexport default AddUser\n"],"sourceRoot":""}