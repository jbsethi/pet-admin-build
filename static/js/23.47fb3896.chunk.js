(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[23],{719:function(e,t,n){"use strict";n.r(t);var c=n(84),a=n(649),i=n(1),r=n.n(i),o=n(20),s=n(650),l=n(161),d=n(49),p=n(17),j=Object(o.i)((function(e){var t=e.match,n=e.show,i=e.setShow,o=e.details,j=e.refetch,m=Object(s.a)({url:"https://app.aloropivetcenter.com/api/treatments",method:"POST"},{manual:!0}),u=Object(c.a)(m,2)[1],h=r.a.useState({statement:"",prescription:"",description:"",recomendation:"",followUp:""}),b=Object(c.a)(h,2),O=b[0],f=b[1],x=function(e){f((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},e.target.name,e.target.value))}))};return r.a.useEffect((function(){n&&o&&f({statement:o.statement,prescription:o.prescription,description:o.description,recomendation:o.recomendation,followUp:""})}),[o,n]),Object(p.jsxs)(a.K,{show:n,onClose:function(){return i(!1)},children:[Object(p.jsx)(a.N,{children:o?"Treatment Details":"New Prescription"}),Object(p.jsxs)(a.L,{children:[Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"Statement",children:"Statement"}),Object(p.jsx)(a.B,{disabled:o,value:O.statement,name:"statement",onChange:x,id:"statement",placeholder:"Enter Statement"})]}),Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"prescription",children:"Prescription"}),Object(p.jsx)(a.B,{disabled:o,value:O.prescription,name:"prescription",onChange:x,id:"prescription",placeholder:"Enter Prescription"})]}),Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"recomendation",children:"Recomendation"}),Object(p.jsx)(a.B,{disabled:o,value:O.recomendation,name:"recomendation",onChange:x,id:"recomendation",placeholder:"Enter Recomendation"})]}),Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"description",children:"Description"}),Object(p.jsx)(a.B,{disabled:o,value:O.description,name:"description",onChange:x,id:"description",placeholder:"Enter Description"})]}),Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"followUp",children:"Follow up ?"}),Object(p.jsx)(a.B,{disabled:o,type:"number",value:O.followUp,name:"followUp",onChange:x,id:"followUp",placeholder:"Enter follow Up day"})]})]}),Object(p.jsxs)(a.M,{children:[Object(p.jsx)(a.e,{color:"danger",onClick:function(){return i(!1)},children:"Cancel"}),!o&&Object(p.jsx)(a.e,{onClick:function(){if(!o){var e="";if((null===O||void 0===O?void 0:O.followUp)>0){var n=new Date;n.setDate(n.getDate()+(null===O||void 0===O?void 0:O.followUp)),e="".concat(n.getFullYear(),"-").concat(("0"+(n.getMonth()+1)).slice(-2),"-").concat(("0"+n.getDate()).slice(-2))}var c=Object(d.a)(Object(d.a)({},O),{},{orderId:t.params.slug.split("-")[1],petId:t.params.petId,followUp:e});u({data:c}).then((function(e){j(),f({statement:"",prescription:"",description:"",recomendation:"",followUp:""}),i(!1)}))}},color:"primary",children:"Submit"})]})]})})),m=n(162),u=function(e){var t=e.match,n=r.a.useContext(m.a).role,i=r.a.useState(null),o=Object(c.a)(i,2),l=o[0],d=o[1],u=r.a.useState(!1),h=Object(c.a)(u,2),b=h[0],O=h[1],f=r.a.useState([]),x=Object(c.a)(f,2),v=x[0],w=x[1],g=Object(s.a)({url:"https://app.aloropivetcenter.com/api/treatments/all/pets",method:"POST"},{manual:!0}),N=Object(c.a)(g,2),S=N[0].loading,P=N[1];return r.a.useEffect((function(){P({data:{petId:t.params.petId}}).then((function(e){var t;w((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[])}))}),[P,t.params.petId]),Object(p.jsxs)(a.f,{children:[Object(p.jsx)(a.j,{children:Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(p.jsx)("div",{className:"font-lg",children:"Pet Previous History"}),"doctor"===n&&Object(p.jsx)(a.e,{color:"primary",onClick:function(){return O(!0)},children:"Add Prescription for Pet"})]})}),Object(p.jsx)(a.g,{className:"p-0",children:Object(p.jsx)(a.o,{loading:S,fields:["statement","description","createdAt"],items:v,onRowClick:function(e){return function(e){d(e),O(!0)}(e)},striped:!0})}),Object(p.jsx)(j,{show:b,setShow:function(e){O(e),e||d(null)},refetch:function(){P({data:{petId:t.params.petId}}).then((function(e){var t;w((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[])}))},details:l})]})},h=n(160),b=Object(o.i)((function(e){var t=e.match,n=e.pet;return Object(p.jsx)(h.c,{to:{pathname:"/appointments/".concat(t.params.id,"/").concat(t.params.slug,"/").concat(n.id)},children:Object(p.jsx)(a.f,{className:"m-0",children:Object(p.jsx)(a.g,{className:"p-3",children:Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(p.jsx)("p",{className:"m-0",children:n.name}),Object(p.jsx)("p",{className:"m-0",children:n.createdAt})]})})})})})),O=function(e){return e.pets.map((function(e){return Object(p.jsx)(b,{pet:e},e.id)}))};t.default=function(e){var t=e.match,n=Object(o.g)(),i=r.a.useState([]),l=Object(c.a)(i,2),d=l[0],j=l[1],m=Object(s.a)({url:"https://app.aloropivetcenter.com/api/pets/all/patients",method:"POST"},{manual:!0}),h=Object(c.a)(m,2),b=h[0].loading,f=h[1];return r.a.useEffect((function(){f({data:{patientId:t.params.id}}).then((function(e){var c,a,i,r;j(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.rows.map((function(e){return{id:e.id,name:e.name,createdAt:e.createdAt}}))),(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.rows)||void 0===i?void 0:i.length)>0&&n.replace("/appointments/".concat(t.params.id,"/").concat(t.params.slug,"/").concat(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.rows[0].id))}))}),[f,t.params.id,t.params.slug,n]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(a.T,{children:[Object(p.jsx)(a.k,{md:"4",children:Object(p.jsxs)(a.f,{children:[Object(p.jsx)(a.j,{children:Object(p.jsx)("p",{className:"font-lg m-0",children:"Pets"})}),Object(p.jsx)(a.g,{className:"p-0",children:b?Object(p.jsx)("p",{className:"pt-3 text-center",children:"Loading ..."}):Object(p.jsx)(O,{pets:d})})]})}),Object(p.jsxs)(a.k,{children:[Object(p.jsx)(o.b,{path:"/appointments/:id/:slug",exact:!0,render:function(){return Object(p.jsx)("p",{className:"p-5 text-center",children:"Please select Pet to view details."})}}),Object(p.jsx)(o.b,{path:"/appointments/:id/:slug/:petId",component:u})]})]})})}}}]);
//# sourceMappingURL=23.47fb3896.chunk.js.map