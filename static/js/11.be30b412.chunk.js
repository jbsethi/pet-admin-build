(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[11],{680:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return s}));var c="https://app.aloropivetcenter.com/api",s="https://app.aloropivetcenter.com/public/"},723:function(e,t,a){"use strict";a.r(t);var c=a(174),s=a(53),n=a(66),r=a(1),i=a.n(r),o=a(24),l=a(674),m=a(680),d=a(72),j=a(173),u=a(18);t.default=function(e){var t,a,h,p,b=e.match,O=Object(r.useContext)(j.a).addToast,x=Object(o.g)(),w=Object(l.a)({url:"https://app.aloropivetcenter.com/api/users".concat((null===b||void 0===b||null===(t=b.params)||void 0===t?void 0:t.id)?"/"+(null===b||void 0===b||null===(a=b.params)||void 0===a?void 0:a.id):""),method:(null===b||void 0===b||null===(h=b.params)||void 0===h?void 0:h.id)?"PUT":"POST"},{manual:!0}),f=Object(n.a)(w,2),v=f[0],g=v.data,N=v.loading,k=f[1],y=Object(l.a)({url:"".concat(m.a,"/users/").concat(b.params.id),method:"GET"},{manual:!0}),C=Object(n.a)(y,2),F=C[0].data,G=C[1],I=i.a.useState(null),B=Object(n.a)(I,2),E=B[0],P=B[1],_=i.a.useState({emiratesId:"",role:1,name:"",email:"",contact:"",username:"",password:"",confirm_password:"",image:"",active:!0}),T=Object(n.a)(_,2),U=T[0],D=T[1],A=function(e){D((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(c.a)({},e.target.name,"active"===e.target.name?e.target.checked:e.target.value))}))};return i.a.useEffect((function(){g&&x.push("/users")}),[g,x]),i.a.useEffect((function(){var e;F?D({emiratesId:F.emiratesId,role:F.role,name:F.name,email:F.email,contact:F.contact,username:F.username,password:"",confirm_password:"",image:F.image,active:F.active}):(null===b||void 0===b||null===(e=b.params)||void 0===e?void 0:e.id)&&G().catch((function(e){O({message:e.response.data.message})}))}),[F,D,G,b]),Object(u.jsx)(d.T,{children:Object(u.jsx)(d.k,{xl:12,children:Object(u.jsxs)(d.f,{children:[Object(u.jsx)(d.j,{children:"Add Users"}),Object(u.jsx)(d.g,{children:Object(u.jsx)(d.v,{action:"",method:"post",className:"form-horizontal",children:Object(u.jsxs)(d.T,{children:[Object(u.jsxs)(d.k,{lg:"7",children:[Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-emirates-id",children:"Emirates ID"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsx)(d.B,{value:U.emiratesId,onChange:A,id:"input-emirates-id",name:"emiratesId",placeholder:"Emirates ID"})})]}),Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-role",children:"Roles"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsxs)(d.U,{value:U.role,onChange:A,custom:!0,name:"role",id:"input-role",children:[Object(u.jsx)("option",{value:"1",children:"Administrator"}),Object(u.jsx)("option",{value:"2",children:"Receiptionist"}),Object(u.jsx)("option",{value:"3",children:"Doctor"})]})})]}),Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-name",children:"Name"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsx)(d.B,{value:U.name,onChange:A,id:"input-name",name:"name",placeholder:"Name"})})]}),Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-email",children:"Email"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsx)(d.B,{value:U.email,onChange:A,id:"input-email",name:"email",placeholder:"Email"})})]}),Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-contact",children:"Phone No"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsx)(d.B,{value:U.contact,onChange:A,id:"input-contact",name:"contact",placeholder:"Phone no"})})]}),Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-username",children:"Username"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsx)(d.B,{value:U.username,onChange:A,id:"input-username",name:"username",placeholder:"Username"})})]}),!(null===b||void 0===b||null===(p=b.params)||void 0===p?void 0:p.id)&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-password",children:"Password"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsx)(d.B,{value:U.password,onChange:A,id:"input-password",name:"password",placeholder:"Password",type:"password"})})]}),Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-confirm-password",children:"Confirm Password"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsx)(d.B,{value:U.confirm_password,onChange:A,id:"input-confirm-password",name:"confirm_password",placeholder:"Password",type:"password"})})]})]}),Object(u.jsxs)(d.w,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-active",children:"Active"}),Object(u.jsx)(d.k,{sm:"6",children:Object(u.jsx)(d.eb,{className:"pt-1",color:"primary",name:"active",checked:U.active,onChange:A,variant:"opposite",shape:"pill"})})]})]}),Object(u.jsx)(d.k,{lg:"4",children:Object(u.jsxs)(d.I,{className:"flex-column",children:[Object(u.jsx)("img",{src:E||"https://www.kindpng.com/picc/m/72-723761_student-png-sammilani-mahavidyalaya-undergraduate-and-dummy-user.png",alt:"preview",width:"100%"}),Object(u.jsx)(d.J,{className:"w-100 mt-4",children:Object(u.jsx)(d.w,{row:!0,children:Object(u.jsx)(d.k,{sm:"12",children:Object(u.jsx)(d.B,{onChange:function(e){var t=new FileReader,a=e.target.files[0];t.onloadend=function(){D((function(e){return Object(s.a)(Object(s.a)({},e),{},{image:a})})),P(t.result)},t.readAsDataURL(a)},id:"input-image",name:"image",type:"file"})})})})]})})]})})}),Object(u.jsx)(d.h,{children:Object(u.jsxs)("section",{className:"text-right w-50 ml-auto",children:[Object(u.jsx)(d.e,{onClick:function(){D((function(){return{emiratesId:"",role:1,name:"",email:"",contact:"",username:"",password:"",confirm_password:"",image:"",active:!0}})),P(null)},color:"danger",className:"mr-1 w-25",children:"Clear"}),Object(u.jsx)(d.e,{onClick:function(){if(!N){var e=Object(s.a)({},U);b.params.id&&(delete e.password,delete e.confirm_password);var t=function(e){var t=new FormData;return Object.keys(e).forEach((function(a){return t.append(a,e[a])})),t}(e);k({data:t}).catch((function(e){O({message:e.response.data.message})}))}},color:"primary",className:"w-25",children:N?"Loading":"Submit"})]})})]})})})}}}]);
//# sourceMappingURL=11.be30b412.chunk.js.map