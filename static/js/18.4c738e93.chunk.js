(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[18],{676:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return a}));var c=function(e){return new Date(e).toLocaleString()},a={convert:function(e){return e.constructor===Date?e:e.constructor===Array?new Date(e[0],e[1],e[2]):e.constructor===Number||e.constructor===String?new Date(e):"object"===typeof e?new Date(e.year,e.month,e.date):NaN},compare:function(e,t){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())?(e>t)-(e<t):NaN},inRange:function(e,t,n){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())&&isFinite(n=this.convert(n).valueOf())?t<=e&&e<=n:NaN}}},732:function(e,t,n){"use strict";n.r(t);var c=n(66),a=n(72),i=n(1),r=n.n(i),s=n(24),o=n(675),l=n(175),d=n(174),u=n(52),j=n(680),p=n(173),m=n(674),b=n(18),h=Object(s.i)((function(e){var t=e.match,n=e.show,i=e.setShow,s=e.details,h=e.refetch,f=r.a.useContext(p.a).addToast,O=r.a.useState([]),x=Object(c.a)(O,2),v=x[0],g=x[1],w=r.a.useState([]),N=Object(c.a)(w,2),S=N[0],y=N[1],C=r.a.useState([]),k=Object(c.a)(C,2),I=k[0],P=k[1],F=Object(o.a)({url:m.a+"/treatments",method:"POST"},{manual:!0}),E=Object(c.a)(F,2)[1],T=r.a.useState({statement:"",prescription:"",description:"",followUp:""}),U=Object(c.a)(T,2),A=U[0],D=U[1],G=function(e){D((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(d.a)({},e.target.name,e.target.value))}))};r.a.useEffect((function(){return n&&s&&(D({statement:s.statement,prescription:s.prescription,description:s.description,followUp:""}),y((function(){return s.Recomendations.map((function(e,t){return B(),{idx:t,value:e.itemId,label:e.Item.name}}))}))),function(){g([]),y([])}}),[s,n]);var R=v.map((function(e,t){return Object(b.jsxs)(a.T,{className:"align-items-center px-3 py-2",children:[Object(b.jsx)(a.l,{md:"1",children:t+1}),Object(b.jsx)(a.l,{children:Object(b.jsx)(j.a,{disabled:s,options:I,value:S.find((function(e){return e.idx===t})),onChange:function(e){return function(e,t){y((function(n){return[].concat(Object(l.a)(n),[Object(u.a)({idx:t},e)])}))}(e,t)}})}),Object(b.jsx)(a.l,{md:"2",children:!s&&Object(b.jsx)(a.f,{onClick:function(){return L(t)},size:"sm",children:"Remove"})})]},t)})),B=function(){g((function(e){return[].concat(Object(l.a)(e),[{serviceId:""}])}))},L=function(e){g((function(t){return t.filter((function(t,n){return n!==e}))})),y((function(t){return t.filter((function(t){return t.idx!==e}))}))};return r.a.useEffect((function(){n&&0===I.length&&E({url:m.a+"/items/records/all?serviceId=3",method:"GET"}).then((function(e){P(e.data.map((function(e){return{label:e.name,value:e.id}})))}))}),[n,I,E]),Object(b.jsxs)(a.K,{show:n,onClose:function(){return i(!1)},children:[Object(b.jsx)(a.N,{children:s?"Treatment Details":"New Prescription"}),Object(b.jsxs)(a.L,{children:[Object(b.jsxs)(a.x,{children:[Object(b.jsx)(a.G,{htmlFor:"Statement",children:"Statement"}),Object(b.jsx)(a.B,{disabled:s,value:A.statement,name:"statement",onChange:G,id:"statement",placeholder:"Enter Statement"})]}),Object(b.jsxs)(a.x,{children:[Object(b.jsx)(a.G,{htmlFor:"prescription",children:"Prescription"}),Object(b.jsx)(a.B,{disabled:s,value:A.prescription,name:"prescription",onChange:G,id:"prescription",placeholder:"Enter Prescription"})]}),Object(b.jsxs)(a.x,{className:"py-3 m-0",children:[Object(b.jsxs)(a.T,{className:"px-3 justify-content-between align-items-center",children:[Object(b.jsx)(a.G,{htmlFor:"recomendation",children:"Recomendation"}),!s&&Object(b.jsx)(a.f,{onClick:B,size:"sm",color:"primary",children:"Add Recommendation"})]}),R.length>0&&Object(b.jsx)("section",{className:"py-2",children:R})]}),Object(b.jsxs)(a.x,{children:[Object(b.jsx)(a.G,{htmlFor:"description",children:"Description"}),Object(b.jsx)(a.fb,{disabled:s,value:A.description,onChange:G,name:"description",id:"description",placeholder:"Enter Description"})]}),Object(b.jsxs)(a.x,{children:[Object(b.jsx)(a.G,{htmlFor:"followUp",children:"Follow up ?"}),Object(b.jsx)(a.B,{disabled:s,type:"date",value:A.followUp,name:"followUp",onChange:G,id:"followUp",placeholder:"Enter follow Up day"})]})]}),Object(b.jsxs)(a.M,{children:[Object(b.jsx)(a.f,{color:"danger",onClick:function(){return i(!1)},children:"Cancel"}),!s&&Object(b.jsx)(a.f,{onClick:function(){if(!s){var e=(null===A||void 0===A?void 0:A.followUp)||null,n=Object(u.a)(Object(u.a)({},A),{},{orderId:t.params.slug.split("-")[1],petId:t.params.petId,followUp:e,recomendations:S.map((function(e){return e.value}))});E({data:n}).then((function(e){h(),D({statement:"",prescription:"",description:"",followUp:""}),i(!1)})).catch((function(e){var t,n;f({message:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Error Occured ! Try again later"})}))}},color:"primary",children:"Submit"})]})]})})),f=n(676),O=function(e){var t=e.match,n=r.a.useContext(p.a).role,i=r.a.useState(null),s=Object(c.a)(i,2),l=s[0],d=s[1],u=r.a.useState(!1),j=Object(c.a)(u,2),O=j[0],x=j[1],v=r.a.useState([]),g=Object(c.a)(v,2),w=g[0],N=g[1],S=Object(o.a)({url:m.a+"/treatments/all/pets",method:"POST"},{manual:!0}),y=Object(c.a)(S,2),C=y[0].loading,k=y[1];return r.a.useEffect((function(){k({data:{petId:t.params.petId}}).then((function(e){var t;N((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[])}))}),[k,t.params.petId]),Object(b.jsxs)(a.g,{children:[Object(b.jsx)(a.k,{children:Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(b.jsx)("div",{className:"font-lg",children:"Pet Previous History"}),"doctor"===n&&Object(b.jsx)(a.f,{color:"primary",onClick:function(){return x(!0)},children:"Add Prescription for Pet"})]})}),Object(b.jsx)(a.h,{className:"p-0",children:Object(b.jsx)(a.p,{loading:C,fields:["statement","description","createdAt"],items:w,onRowClick:function(e){return function(e){d(e),x(!0)}(e)},striped:!0,scopedSlots:{createdAt:function(e){return Object(b.jsx)("td",{children:Object(f.b)(e.createdAt)})}}})}),Object(b.jsx)(h,{show:O,setShow:function(e){x(e),e||d(null)},refetch:function(){k({data:{petId:t.params.petId}}).then((function(e){var t;N((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[])}))},details:l})]})},x=n(53),v=Object(s.i)((function(e){var t=e.match,n=e.pet;return Object(b.jsx)(x.c,{to:{pathname:"/check-up/".concat(t.params.id,"/").concat(t.params.slug,"/").concat(n.id)},children:Object(b.jsx)(a.g,{className:"m-0",children:Object(b.jsx)(a.h,{className:"p-3",children:Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(b.jsx)("p",{className:"m-0",children:n.name}),Object(b.jsx)("p",{className:"m-0",children:Object(f.b)(n.createdAt)})]})})})})})),g=function(e){return e.pets.map((function(e){return Object(b.jsx)(v,{pet:e},e.id)}))};t.default=function(e){var t=e.match,n=Object(s.g)(),i=r.a.useState([]),l=Object(c.a)(i,2),d=l[0],u=l[1],j=Object(o.a)({url:m.a+"/pets/all/patients",method:"POST"},{manual:!0}),p=Object(c.a)(j,2),h=p[0].loading,f=p[1];return r.a.useEffect((function(){f({data:{patientId:t.params.id}}).then((function(e){var c,a,i,r;u(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.rows.map((function(e){return{id:e.id,name:e.name,createdAt:e.createdAt}}))),(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.rows)||void 0===i?void 0:i.length)>0&&n.replace("/check-up/".concat(t.params.id,"/").concat(t.params.slug,"/").concat(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.rows[0].id))}))}),[f,t.params.id,t.params.slug,n]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(a.T,{children:[Object(b.jsx)(a.l,{md:"4",children:Object(b.jsxs)(a.g,{children:[Object(b.jsx)(a.k,{children:Object(b.jsx)("p",{className:"font-lg m-0",children:"Pets"})}),Object(b.jsx)(a.h,{className:"p-0",children:h?Object(b.jsx)("p",{className:"pt-3 text-center",children:"Loading ..."}):Object(b.jsx)(g,{pets:d})})]})}),Object(b.jsxs)(a.l,{children:[Object(b.jsx)(s.b,{path:"/check-up/:id/:slug",exact:!0,render:function(){return Object(b.jsx)("p",{className:"p-5 text-center",children:"Please select Pet to view details."})}}),Object(b.jsx)(s.b,{path:"/check-up/:id/:slug/:petId",component:O})]})]})})}}}]);
//# sourceMappingURL=18.4c738e93.chunk.js.map