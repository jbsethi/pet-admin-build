(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[23],{729:function(e,t,n){"use strict";n.r(t);var c=n(66),a=n(72),i=n(1),r=n.n(i),s=n(24),o=n(674),l=n(175),d=n(174),j=n(53),u=n(678),p=n(18),m=Object(s.i)((function(e){var t=e.match,n=e.show,i=e.setShow,s=e.details,m=e.refetch,b=r.a.useState([]),h=Object(c.a)(b,2),f=h[0],O=h[1],x=r.a.useState([]),v=Object(c.a)(x,2),w=v[0],g=v[1],N=r.a.useState([]),k=Object(c.a)(N,2),S=k[0],C=k[1],I=Object(o.a)({url:"https://app.aloropivetcenter.com/api/treatments",method:"POST"},{manual:!0}),P=Object(c.a)(I,2)[1],y=r.a.useState({statement:"",prescription:"",description:"",followUp:""}),U=Object(c.a)(y,2),E=U[0],T=U[1],F=function(e){T((function(t){return Object(j.a)(Object(j.a)({},t),{},Object(d.a)({},e.target.name,e.target.value))}))};r.a.useEffect((function(){return n&&s&&(T({statement:s.statement,prescription:s.prescription,description:s.description,followUp:""}),g((function(){return s.Recomendations.map((function(e,t){return G(),{idx:t,value:e.itemId,label:e.Item.name}}))}))),function(){O([]),g([])}}),[s,n]);var A=f.map((function(e,t){return Object(p.jsxs)(a.T,{className:"align-items-center px-3 py-2",children:[Object(p.jsx)(a.k,{md:"1",children:t+1}),Object(p.jsx)(a.k,{children:Object(p.jsx)(u.a,{disabled:s,options:S,value:w.find((function(e){return e.idx===t})),onChange:function(e){return function(e,t){g((function(n){return[].concat(Object(l.a)(n),[Object(j.a)({idx:t},e)])}))}(e,t)}})}),Object(p.jsx)(a.k,{md:"2",children:!s&&Object(p.jsx)(a.e,{onClick:function(){return R(t)},size:"sm",children:"Remove"})})]},t)})),G=function(){O((function(e){return[].concat(Object(l.a)(e),[{serviceId:""}])}))},R=function(e){O((function(t){return t.filter((function(t,n){return n!==e}))})),g((function(t){return t.filter((function(t){return t.idx!==e}))}))};return r.a.useEffect((function(){n&&0===S.length&&P({url:"https://app.aloropivetcenter.com/api/items/records/all?serviceId=3",method:"GET"}).then((function(e){C(e.data.map((function(e){return{label:e.name,value:e.id}})))}))}),[n,S,P]),Object(p.jsxs)(a.K,{show:n,onClose:function(){return i(!1)},children:[Object(p.jsx)(a.N,{children:s?"Treatment Details":"New Prescription"}),Object(p.jsxs)(a.L,{children:[Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"Statement",children:"Statement"}),Object(p.jsx)(a.B,{disabled:s,value:E.statement,name:"statement",onChange:F,id:"statement",placeholder:"Enter Statement"})]}),Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"prescription",children:"Prescription"}),Object(p.jsx)(a.B,{disabled:s,value:E.prescription,name:"prescription",onChange:F,id:"prescription",placeholder:"Enter Prescription"})]}),Object(p.jsxs)(a.w,{className:"py-3 m-0",children:[Object(p.jsxs)(a.T,{className:"px-3 justify-content-between align-items-center",children:[Object(p.jsx)(a.G,{htmlFor:"recomendation",children:"Recomendation"}),!s&&Object(p.jsx)(a.e,{onClick:G,size:"sm",color:"primary",children:"Add Recommendation"})]}),A.length>0&&Object(p.jsx)("section",{className:"py-2",children:A})]}),Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"description",children:"Description"}),Object(p.jsx)(a.fb,{disabled:s,value:E.description,onChange:F,name:"description",id:"description",placeholder:"Enter Description"})]}),Object(p.jsxs)(a.w,{children:[Object(p.jsx)(a.G,{htmlFor:"followUp",children:"Follow up ?"}),Object(p.jsx)(a.B,{disabled:s,type:"date",value:E.followUp,name:"followUp",onChange:F,id:"followUp",placeholder:"Enter follow Up day"})]})]}),Object(p.jsxs)(a.M,{children:[Object(p.jsx)(a.e,{color:"danger",onClick:function(){return i(!1)},children:"Cancel"}),!s&&Object(p.jsx)(a.e,{onClick:function(){if(!s){var e=(null===E||void 0===E?void 0:E.followUp)||null,n=Object(j.a)(Object(j.a)({},E),{},{orderId:t.params.slug.split("-")[1],petId:t.params.petId,followUp:e,recomendations:w.map((function(e){return e.value}))});P({data:n}).then((function(e){m(),T({statement:"",prescription:"",description:"",followUp:""}),i(!1)}))}},color:"primary",children:"Submit"})]})]})})),b=n(173),h=function(e){var t=e.match,n=r.a.useContext(b.a).role,i=r.a.useState(null),s=Object(c.a)(i,2),l=s[0],d=s[1],j=r.a.useState(!1),u=Object(c.a)(j,2),h=u[0],f=u[1],O=r.a.useState([]),x=Object(c.a)(O,2),v=x[0],w=x[1],g=Object(o.a)({url:"https://app.aloropivetcenter.com/api/treatments/all/pets",method:"POST"},{manual:!0}),N=Object(c.a)(g,2),k=N[0].loading,S=N[1];return r.a.useEffect((function(){S({data:{petId:t.params.petId}}).then((function(e){var t;w((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[])}))}),[S,t.params.petId]),Object(p.jsxs)(a.f,{children:[Object(p.jsx)(a.j,{children:Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(p.jsx)("div",{className:"font-lg",children:"Pet Previous History"}),"doctor"===n&&Object(p.jsx)(a.e,{color:"primary",onClick:function(){return f(!0)},children:"Add Prescription for Pet"})]})}),Object(p.jsx)(a.g,{className:"p-0",children:Object(p.jsx)(a.o,{loading:k,fields:["statement","description","createdAt"],items:v,onRowClick:function(e){return function(e){d(e),f(!0)}(e)},striped:!0})}),Object(p.jsx)(m,{show:h,setShow:function(e){f(e),e||d(null)},refetch:function(){S({data:{petId:t.params.petId}}).then((function(e){var t;w((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[])}))},details:l})]})},f=n(52),O=Object(s.i)((function(e){var t=e.match,n=e.pet;return Object(p.jsx)(f.c,{to:{pathname:"/check-up/".concat(t.params.id,"/").concat(t.params.slug,"/").concat(n.id)},children:Object(p.jsx)(a.f,{className:"m-0",children:Object(p.jsx)(a.g,{className:"p-3",children:Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(p.jsx)("p",{className:"m-0",children:n.name}),Object(p.jsx)("p",{className:"m-0",children:n.createdAt})]})})})})})),x=function(e){return e.pets.map((function(e){return Object(p.jsx)(O,{pet:e},e.id)}))};t.default=function(e){var t=e.match,n=Object(s.g)(),i=r.a.useState([]),l=Object(c.a)(i,2),d=l[0],j=l[1],u=Object(o.a)({url:"https://app.aloropivetcenter.com/api/pets/all/patients",method:"POST"},{manual:!0}),m=Object(c.a)(u,2),b=m[0].loading,f=m[1];return r.a.useEffect((function(){f({data:{patientId:t.params.id}}).then((function(e){var c,a,i,r;j(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.rows.map((function(e){return{id:e.id,name:e.name,createdAt:e.createdAt}}))),(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(i=a.rows)||void 0===i?void 0:i.length)>0&&n.replace("/check-up/".concat(t.params.id,"/").concat(t.params.slug,"/").concat(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.rows[0].id))}))}),[f,t.params.id,t.params.slug,n]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(a.T,{children:[Object(p.jsx)(a.k,{md:"4",children:Object(p.jsxs)(a.f,{children:[Object(p.jsx)(a.j,{children:Object(p.jsx)("p",{className:"font-lg m-0",children:"Pets"})}),Object(p.jsx)(a.g,{className:"p-0",children:b?Object(p.jsx)("p",{className:"pt-3 text-center",children:"Loading ..."}):Object(p.jsx)(x,{pets:d})})]})}),Object(p.jsxs)(a.k,{children:[Object(p.jsx)(s.b,{path:"/check-up/:id/:slug",exact:!0,render:function(){return Object(p.jsx)("p",{className:"p-5 text-center",children:"Please select Pet to view details."})}}),Object(p.jsx)(s.b,{path:"/check-up/:id/:slug/:petId",component:h})]})]})})}}}]);
//# sourceMappingURL=23.80764e05.chunk.js.map