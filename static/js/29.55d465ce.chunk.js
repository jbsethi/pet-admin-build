(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[29],{850:function(e,t,a){"use strict";a.r(t);var s=a(195),c=a(63),n=a(82),r=a(1),i=a.n(r),l=a(29),o=a(720),m=a(719),d=a(89),j=a(194),u=a(22);t.default=function(e){var t,a,h,p,x=e.match,b=Object(r.useContext)(j.a).addToast,O=Object(l.g)(),f=Object(o.a)({url:m.a+"/users".concat((null===x||void 0===x||null===(t=x.params)||void 0===t?void 0:t.id)?"/"+(null===x||void 0===x||null===(a=x.params)||void 0===a?void 0:a.id):""),method:(null===x||void 0===x||null===(h=x.params)||void 0===h?void 0:h.id)?"PUT":"POST"},{manual:!0}),g=Object(n.a)(f,2),v=g[0],w=v.data,N=v.loading,y=g[1],C=Object(o.a)({url:"".concat(m.a,"/users/").concat(x.params.id),method:"GET"},{manual:!0}),F=Object(n.a)(C,2),G=F[0].data,k=F[1],I=i.a.useState(null),B=Object(n.a)(I,2),E=B[0],P=B[1],_=i.a.useState({emiratesId:"",role:1,name:"",email:"",contact:"",username:"",password:"",confirm_password:"",image:"",active:!0}),T=Object(n.a)(_,2),U=T[0],D=T[1],A=function(e){D((function(t){return Object(c.a)(Object(c.a)({},t),{},Object(s.a)({},e.target.name,"active"===e.target.name?e.target.checked:e.target.value))}))};return i.a.useEffect((function(){w&&O.push("/users")}),[w,O]),i.a.useEffect((function(){var e;G?D({emiratesId:G.emiratesId,role:G.role,name:G.name,email:G.email,contact:G.contact,username:G.username,password:"",confirm_password:"",image:G.image,active:G.active}):(null===x||void 0===x||null===(e=x.params)||void 0===e?void 0:e.id)&&k().catch((function(e){b({message:e.response.data.message})}))}),[G,D,k,x]),Object(u.jsx)(d.T,{children:Object(u.jsx)(d.l,{xl:12,children:Object(u.jsxs)(d.g,{children:[Object(u.jsx)(d.k,{children:"Add Users"}),Object(u.jsx)(d.h,{children:Object(u.jsx)(d.w,{action:"",method:"post",className:"form-horizontal",children:Object(u.jsxs)(d.T,{children:[Object(u.jsxs)(d.l,{lg:"7",children:[Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-emirates-id",children:"Emirates ID"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsx)(d.B,{value:U.emiratesId,onChange:A,id:"input-emirates-id",name:"emiratesId",placeholder:"Emirates ID"})})]}),Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-role",children:"Roles"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsxs)(d.U,{value:U.role,onChange:A,custom:!0,name:"role",id:"input-role",children:[Object(u.jsx)("option",{value:"2",children:"Administrator"}),Object(u.jsx)("option",{value:"4",children:"Receiptionist"}),Object(u.jsx)("option",{value:"3",children:"Doctor"})]})})]}),Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-name",children:"Name"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsx)(d.B,{value:U.name,onChange:A,id:"input-name",name:"name",placeholder:"Name"})})]}),Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-email",children:"Email"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsx)(d.B,{value:U.email,onChange:A,id:"input-email",name:"email",placeholder:"Email"})})]}),Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-contact",children:"Phone No"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsx)(d.B,{value:U.contact,onChange:A,id:"input-contact",name:"contact",placeholder:"Phone no"})})]}),Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-username",children:"Username"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsx)(d.B,{value:U.username,onChange:A,id:"input-username",name:"username",placeholder:"Username"})})]}),!(null===x||void 0===x||null===(p=x.params)||void 0===p?void 0:p.id)&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-password",children:"Password"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsx)(d.B,{value:U.password,onChange:A,id:"input-password",name:"password",placeholder:"Password",type:"password"})})]}),Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-confirm-password",children:"Confirm Password"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsx)(d.B,{value:U.confirm_password,onChange:A,id:"input-confirm-password",name:"confirm_password",placeholder:"Password",type:"password"})})]})]}),Object(u.jsxs)(d.x,{row:!0,className:"justify-content-center",children:[Object(u.jsx)(d.G,{className:"text-right",sm:"3",col:!0,htmlFor:"input-active",children:"Active"}),Object(u.jsx)(d.l,{sm:"6",children:Object(u.jsx)(d.eb,{className:"pt-1",color:"primary",name:"active",checked:U.active,onChange:A,variant:"opposite",shape:"pill"})})]})]}),Object(u.jsx)(d.l,{lg:"4",children:Object(u.jsxs)(d.I,{className:"flex-column",children:[Object(u.jsx)("img",{src:E||"https://www.kindpng.com/picc/m/72-723761_student-png-sammilani-mahavidyalaya-undergraduate-and-dummy-user.png",alt:"preview",width:"100%"}),Object(u.jsx)(d.J,{className:"w-100 mt-4",children:Object(u.jsx)(d.x,{row:!0,children:Object(u.jsx)(d.l,{sm:"12",children:Object(u.jsx)(d.B,{onChange:function(e){var t=new FileReader,a=e.target.files[0];t.onloadend=function(){D((function(e){return Object(c.a)(Object(c.a)({},e),{},{image:a})})),P(t.result)},t.readAsDataURL(a)},id:"input-image",name:"image",type:"file"})})})})]})})]})})}),Object(u.jsx)(d.i,{children:Object(u.jsxs)("section",{className:"text-right w-50 ml-auto",children:[Object(u.jsx)(d.f,{onClick:function(){D((function(){return{emiratesId:"",role:1,name:"",email:"",contact:"",username:"",password:"",confirm_password:"",image:"",active:!0}})),P(null)},color:"danger",className:"mr-1 w-25",children:"Clear"}),Object(u.jsx)(d.f,{onClick:function(){if(!N){var e=Object(c.a)({},U);x.params.id&&(delete e.password,delete e.confirm_password);var t=function(e){var t=new FormData;return Object.keys(e).forEach((function(a){return t.append(a,e[a])})),t}(e);y({data:t}).catch((function(e){b({message:e.response.data.message})}))}},color:"primary",className:"w-25",children:N?"Loading":"Submit"})]})})]})})})}}}]);
//# sourceMappingURL=29.55d465ce.chunk.js.map