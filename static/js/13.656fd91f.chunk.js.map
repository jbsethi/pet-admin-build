{"version":3,"sources":["utils/dateUtils.js","views/base/tableHeader/TableHeader.js","views/users/Users.js"],"names":["formatDate","date","Date","toISOString","slice","replace","TableHeader","keyword","changeKeyword","children","className","sm","type","name","placeholder","autoComplete","value","onChange","onKeyPress","fields","key","_classes","label","Users","React","useState","setKeyword","addToast","useContext","AppContext","history","useHistory","totalPages","setTotalPages","currentPage","setActivePage","useAxios","url","method","params","pageNo","manual","data","loading","error","refetch","useEffect","catch","err","message","response","xl","items","rows","striped","itemsPerPage","clickableRows","onRowClick","item","push","id","overTableSlot","e","search","target","color","variant","onClick","underTableSlot","activePage","pages","onActivePageChange","i","scopedSlots","createdAt","status","active"],"mappings":"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","file":"static/js/13.656fd91f.chunk.js","sourcesContent":["export const formatDate = (date) => {\n  return (new Date(date)).toISOString().slice(0, 19).replace(/-/g, \"/\").replace(\"T\", \" \");\n}","import React from 'react'\r\n\r\nimport {\r\n  CRow,\r\n  CCol,\r\n  CFormGroup,\r\n  CInput,\r\n} from '@coreui/react'\r\n\r\n\r\nconst TableHeader = ({ keyword = '', changeKeyword = null, children }) => {\r\n  return (\r\n    <CRow className=\"align-items-center justify-content-between\">\r\n      <CCol sm=\"4\">\r\n        <CFormGroup className=\"mb-0\">\r\n          <CInput\r\n            type=\"text\"\r\n            name=\"nf-text\"\r\n            placeholder=\"Search Here..\"\r\n            autoComplete=\"off\"\r\n            value={keyword}\r\n            onChange={changeKeyword}\r\n            onKeyPress={changeKeyword}\r\n          />\r\n        </CFormGroup>\r\n      </CCol>\r\n      <CCol sm=\"4\" className=\"d-flex justify-content-end\">\r\n        { children }\r\n      </CCol>\r\n    </CRow>\r\n  )\r\n}\r\n\r\nexport default TableHeader\r\n","import React, { useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport useAxios from 'axios-hooks'\nimport TableHeader from '../base/tableHeader/TableHeader'\n\nimport { formatDate } from '../../utils/dateUtils'\n\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CPagination,\n  CButton\n} from '@coreui/react'\n\nimport { AppContext } from '../../App.js'\n\nconst fields = [\n  { key: 'name', _classes: 'font-weight-bold' },\n  'email',\n  'username',\n  'role',\n  {\n    key: 'createdAt',\n    label: 'Registered'\n  },\n  'active'\n]\n\nconst getBadge = status => {\n  if (status) {\n    return 'success'\n  } else {\n    return 'danger'\n  }\n}\n\nconst Users = () => {\n  const [keyword, setKeyword] = React.useState('')\n  const { addToast } = useContext(AppContext)\n  const history = useHistory()\n  const [totalPages, setTotalPages] = React.useState(1)\n  const [currentPage, setActivePage] = React.useState(1)\n\n  const [{ data, loading, error }, refetch] = useAxios(\n    {\n      url: 'https://app.aloropivetcenter.com/api/users',\n      method: 'GET',\n      params: {\n        pageNo: currentPage\n      }\n    },\n    {\n      manual: true\n    }\n  )\n\n  React.useEffect(() => {\n    if (data?.totalPages) {\n      setTotalPages(data.totalPages)\n    }\n  }, [data])\n\n\n  React.useEffect(() => {\n    refetch().catch(err => {\n      addToast({\n        message: err?.response?.data?.message || 'Error Occured try again later !'\n      })\n    })\n  }, [refetch])\n\n  const changeKeyword = (e) => {\n    if(e.key === 'Enter') {\n      refetch({\n        params: {\n          search: keyword\n        }\n      }).catch(err => {\n        addToast({\n          message: err?.response?.data?.message || 'Error Occured try again later !'\n        })\n      })\n    } else {\n      setKeyword(e.target.value)\n    }\n  }\n\n  return (\n    <CRow>\n      <CCol xl={12}>\n        <CCard>\n          <CCardHeader>\n            Users\n          </CCardHeader>\n          <CCardBody>\n          <CDataTable\n            items={loading ? [] : (error ? [] : data?.rows || [])}\n            fields={fields}\n            striped\n            itemsPerPage={10}\n            loading={loading}\n            clickableRows\n            onRowClick={(item) => history.push(`/users/${item.id}`)}\n            overTableSlot={\n              <TableHeader keyword={keyword} changeKeyword={changeKeyword}>\n                <CButton\n                  color=\"primary\"\n                  variant=\"outline\"\n                    className=\"m-2 pl-3 pr-4\"\n                    onClick={() => history.push('/users/add')}\n                  >\n                    <span className=\"ml-1\">Add New User</span>\n                  </CButton>\n              </TableHeader>\n            }\n            underTableSlot={\n              <CPagination\n                activePage={currentPage}\n                pages={totalPages}\n                onActivePageChange={(i) => setActivePage(i)}\n              ></CPagination>\n            }\n            scopedSlots = {{\n              'createdAt':\n                (item) => (\n                  <td>\n                    {formatDate(item.createdAt)}\n                  </td>\n                ),\n              'active':\n                (item)=>(\n                  <td>\n                    <CBadge color={getBadge(item.active)}>\n                      {item.active  ? 'Active' : 'Inactive'}\n                    </CBadge>\n                  </td>\n                )\n            }}\n          />\n          </CCardBody>\n        </CCard>\n      </CCol>\n    </CRow>\n  )\n}\n\nexport default Users\n"],"sourceRoot":""}