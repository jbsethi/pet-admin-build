(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[18],{717:function(e,t,c){"use strict";c.r(t);var a=c(49),i=c(84),r=c(1),n=c.n(r),o=c(649),s=c(20),l=c(656),d=c(650),j=c(17),p=function(e){var t=e.isVisitorRecordAdded,c=e.visitorRecord,a=e.dispatch;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"emiratesId",children:"Visitors Emirates ID"}),Object(j.jsx)(o.B,{disabled:t,value:c.emiratesId,name:"emiratesId",onChange:function(e){return a({type:"handleChangeVisitorRecord",payload:e})},id:"emiratesId",placeholder:"Enter Visitor's emirates id"})]}),Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"name",children:"Visitors Name"}),Object(j.jsx)(o.B,{disabled:t,value:c.name,name:"name",onChange:function(e){return a({type:"handleChangeVisitorRecord",payload:e})},id:"name",placeholder:"Enter Visitor's name"})]}),Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"email",children:"Email"}),Object(j.jsx)(o.B,{disabled:t,value:c.email,name:"email",onChange:function(e){return a({type:"handleChangeVisitorRecord",payload:e})},id:"email",placeholder:"Enter Visitor's email"})]}),Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"contact",children:"Phone No"}),Object(j.jsx)(o.B,{disabled:t,value:c.contact,name:"contact",onChange:function(e){return a({type:"handleChangeVisitorRecord",payload:e})},id:"contact",placeholder:"Enter Phone number"})]})]})},u=c(654),m=c.n(u),b=c(655),h=c(161),O=function(e){var t,c=e.show,r=e.setShow,s=e.dispatch,p=n.a.useState({categoryId:null,itemId:null,packageId:null,quantity:1}),u=Object(i.a)(p,2),O=u[0],x=u[1],v=n.a.useState([]),f=Object(i.a)(v,2),y=f[0],g=f[1],I=n.a.useState([]),w=Object(i.a)(I,2),k=w[0],F=w[1],R=n.a.useState([]),V=Object(i.a)(R,2),C=V[0],N=V[1],A=Object(d.a)({url:"https://app.aloropivetcenter.com/api/services",method:"POST"},{manual:!0}),S=Object(i.a)(A,2)[1],D=function(e){e.isSelect?x((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(h.a)({},e.valueFor,e.option))})):x((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))},E=n.a.useCallback(Object(b.a)(m.a.mark((function e(){var t,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({url:"https://app.aloropivetcenter.com/api/services",method:"GET"});case 3:c=e.sent,a=((null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.rows)||[]).map((function(e){return{label:e.displayName,value:e.id}})),g(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[S]),G=n.a.useCallback(Object(b.a)(m.a.mark((function e(){var t,c,i,r,n,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x((function(e){return Object(a.a)(Object(a.a)({},e),{},{itemId:null,packageId:null})})),e.next=4,S({url:"https://app.aloropivetcenter.com/api/packages/records/all",method:"GET",params:{serviceId:(null===(t=O.categoryId)||void 0===t?void 0:t.value)||null}});case 4:return i=e.sent,r=((null===i||void 0===i?void 0:i.data)||[]).map((function(e){return{label:e.name,value:e.id,price:e.price}})),N(r),e.next=9,S({url:"https://app.aloropivetcenter.com/api/items/records/all",method:"GET",params:{serviceId:(null===(c=O.categoryId)||void 0===c?void 0:c.value)||null}});case 9:n=e.sent,o=((null===n||void 0===n?void 0:n.data)||[]).map((function(e){return{label:e.name,value:e.id,price:e.price}})),F(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[S,null===O||void 0===O||null===(t=O.categoryId)||void 0===t?void 0:t.value]);return n.a.useEffect((function(){c&&E()}),[c,E]),n.a.useEffect((function(){c&&O.categoryId&&(F([]),N([]),G())}),[c,G,O.categoryId]),Object(j.jsxs)(o.K,{show:c,onClose:function(){return r(!1)},children:[Object(j.jsx)(o.N,{children:"Add Item"}),Object(j.jsxs)(o.L,{children:[Object(j.jsxs)(o.w,{row:!0,children:[Object(j.jsx)(o.k,{children:Object(j.jsx)(o.G,{className:"pt-2",htmlFor:"text-category",children:"Category"})}),Object(j.jsx)(o.k,{xs:"12",children:Object(j.jsx)(l.a,{value:O.categoryId,name:"categoryId",options:y,onChange:function(e){return D({isSelect:!0,valueFor:"categoryId",option:e})}})})]}),Object(j.jsxs)(o.w,{row:!0,children:[Object(j.jsx)(o.k,{children:Object(j.jsx)(o.G,{className:"pt-2",htmlFor:"text-package",children:"Package"})}),Object(j.jsx)(o.k,{xs:"12",children:Object(j.jsx)(l.a,{value:O.packageId,name:"packageItem",options:C,onChange:function(e){return D({isSelect:!0,valueFor:"packageId",option:e})}})})]}),Object(j.jsxs)(o.w,{row:!0,children:[Object(j.jsx)(o.k,{children:Object(j.jsx)(o.G,{className:"pt-2",htmlFor:"text-package-item",children:"Item"})}),Object(j.jsx)(o.k,{xs:"12",children:Object(j.jsx)(l.a,{value:O.itemId,name:"packageItem",options:k,onChange:function(e){return D({isSelect:!0,valueFor:"itemId",option:e})}})})]}),Object(j.jsxs)(o.w,{row:!0,children:[Object(j.jsx)(o.k,{children:Object(j.jsx)(o.G,{className:"pt-2",htmlFor:"text-qty",children:"Quantity"})}),Object(j.jsx)(o.k,{xs:"12",children:Object(j.jsx)(o.B,{value:O.quantity,id:"text-qty",name:"quantity",placeholder:"Enter Quantity",type:"number",onChange:D})})]})]}),Object(j.jsxs)(o.M,{children:[Object(j.jsx)(o.e,{color:"danger",onClick:function(){return r(!1)},children:"Cancel"}),Object(j.jsx)(o.e,{color:"primary",onClick:function(){s({type:"addItemInReceipt",payload:O}),x({categoryId:null,itemId:null,packageId:null,quantity:1}),r(!1)},children:"Submit"})]})]})},x=["name","category","price","qty","total"],v=function(e){var t=e.receiptFormVisibility,c=e.showAddReceiptFormModal,a=e.receiptItems,i=e.dispatch,r=function(e){i({type:"setShowAddReceiptForm",payload:e})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(o.f,{children:[Object(j.jsxs)(o.j,{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:"Receipt Form"}),Object(j.jsx)(o.eb,{className:"mr-1",color:"dark",shape:"pill",variant:"opposite",value:t,onChange:function(e){return i({type:"setReceiptFormVisibility",payload:e.target.checked})}})]}),t&&Object(j.jsx)(o.g,{children:Object(j.jsx)(o.o,{fields:x,items:a||[],footer:!0,hover:!0,overTableSlot:Object(j.jsx)("div",{className:"text-right",children:Object(j.jsx)(o.e,{size:"sm",color:"primary",variant:"outline",className:"m-2 pl-3 pr-4",onClick:function(){return r(!0)},children:Object(j.jsx)("span",{className:"ml-1",children:"Add Item"})})})})})]}),Object(j.jsx)(O,{show:c,setShow:r,dispatch:i})]})},f=function(e){var t=e.doctorsReceipt;return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"font-weight-bold font-lg",children:"Doctor receipt form"}),Object(j.jsxs)(o.T,{className:"my-2",children:[Object(j.jsx)(o.k,{md:"4",className:"font-weight-bold",children:"Pet's Name"}),Object(j.jsx)(o.k,{children:t.pet.label})]}),Object(j.jsxs)(o.T,{className:"my-2",children:[Object(j.jsx)(o.k,{md:"4",className:"font-weight-bold",children:"Appointment Date"}),Object(j.jsx)(o.k,{children:t.appointmentDate.getDate()+"/"+(+t.appointmentDate.getMonth()+1)+"/"+t.appointmentDate.getFullYear()})]}),Object(j.jsxs)(o.T,{className:"my-2",children:[Object(j.jsx)(o.k,{md:"4",className:"font-weight-bold",children:"Doctor's Name"}),Object(j.jsx)(o.k,{children:"--"})]}),Object(j.jsxs)(o.T,{className:"my-2",children:[Object(j.jsx)(o.k,{md:"4",className:"font-weight-bold",children:"Is Follow Up ?"}),Object(j.jsx)(o.k,{children:t.isFollowUp?"Yes":"No"})]}),Object(j.jsxs)(o.T,{className:"my-2",children:[Object(j.jsx)(o.k,{md:"4",className:"font-weight-bold",children:"Doctor's Fee"}),Object(j.jsxs)(o.k,{children:[t.fee," AED"]})]})]})},y=c(156);var g=c(374);function I(e){return function(e){if(Array.isArray(e))return Object(y.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(g.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=function(e){var t=e.show,c=e.setShow,r=e.visitorId,s=e.setItems,l=e.setSelectedPet,p=Object(d.a)({method:"GET"},{manual:!0}),u=Object(i.a)(p,2)[1],m=n.a.useState({id:"",name:"",pet:"",age:"",color:""}),b=Object(i.a)(m,2),O=b[0],x=b[1],v=function(e){x((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))};return Object(j.jsxs)(o.K,{show:t,onClose:function(){return c(!1)},children:[Object(j.jsx)(o.N,{children:"Add New Pet"}),Object(j.jsxs)(o.L,{children:[Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"name",children:"Pet Name"}),Object(j.jsx)(o.B,{value:O.name,name:"name",onChange:v,id:"name",placeholder:"Enter name"})]}),Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"type",children:"Pet Type"}),Object(j.jsx)(o.B,{value:O.pet,name:"pet",onChange:v,id:"type",placeholder:"Enter type"})]}),Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"age",children:"Pet Age"}),Object(j.jsx)(o.B,{value:O.age,name:"age",onChange:v,id:"age",placeholder:"Enter age"})]}),Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"color",children:"Pet Color"}),Object(j.jsx)(o.B,{value:O.color,name:"color",onChange:v,id:"color",placeholder:"Enter color"})]})]}),Object(j.jsxs)(o.M,{children:[Object(j.jsx)(o.e,{color:"danger",children:"Cancel"}),Object(j.jsx)(o.e,{onClick:function(){var e=Object(a.a)(Object(a.a)({},O),{},{patientId:r});delete e.id,u({url:"https://app.aloropivetcenter.com/api/pets",method:"POST",data:e}).then((function(e){x((function(t){return Object(a.a)(Object(a.a)({},t),{},{id:e.data.id})})),s((function(t){return[].concat(I(t),[e.data])})),l({label:e.data.name,value:e.data}),c(!1)}))},color:"primary",children:"Submit"})]})]})},k=function(e){var t=e.visitorId,c=e.dispatch,a=Object(d.a)({method:"GET"},{manual:!0}),r=Object(i.a)(a,2)[1],s=n.a.useState(!1),p=Object(i.a)(s,2),u=p[0],m=p[1],b=n.a.useState(!1),h=Object(i.a)(b,2),O=h[0],x=h[1],v=n.a.useState(""),f=Object(i.a)(v,2),y=f[0],g=f[1],I=n.a.useState([]),k=Object(i.a)(I,2),F=k[0],R=k[1],V=n.a.useState(null),C=Object(i.a)(V,2),N=C[0],A=C[1],S=n.a.useState(""),D=Object(i.a)(S,2),E=D[0],G=D[1],T=n.a.useState(!1),P=Object(i.a)(T,2),U=P[0],q=P[1];return n.a.useEffect((function(){y.length>0&&r({url:"https://app.aloropivetcenter.com/api/pets",method:"GET",params:{search:y}}).then((function(e){console.log(e)}))}),[y,r]),n.a.useEffect((function(){r({url:"https://app.aloropivetcenter.com/api/pets",method:"GET"}).then((function(e){var t;R((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows.map((function(e){return{label:e.name,value:e}})))||[])}))}),[r]),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{onClick:function(){return m(!0)},className:"my-5 text-center",children:"Add Doctors appointment"}),Object(j.jsxs)(o.K,{show:u,onClose:function(){return m(!1)},children:[Object(j.jsx)(o.N,{children:"Create Appointment"}),Object(j.jsxs)(o.L,{children:[Object(j.jsxs)(o.w,{row:!0,children:[Object(j.jsx)(o.k,{xs:"12",children:Object(j.jsx)(o.G,{className:"pt-1",htmlFor:"search",children:"Select Pet"})}),Object(j.jsx)(o.k,{xs:"12",children:Object(j.jsx)(l.a,{name:"search",value:N,options:F,onInputChange:function(e){return g(e)},onChange:function(e){A(e)}})})]}),Object(j.jsx)("div",{className:"text-right",children:Object(j.jsx)(o.e,{onClick:function(){return x(!0)},size:"sm",children:"Add New Pet"})}),Object(j.jsxs)(o.w,{children:[Object(j.jsx)(o.G,{htmlFor:"fee",children:"Fee"}),Object(j.jsx)(o.B,{value:E,onChange:function(e){return G(e.target.value)},name:"fee",id:"fee",placeholder:"Enter fees"})]}),Object(j.jsxs)(o.w,{row:!0,className:"align-items-center pt-3",children:[Object(j.jsx)(o.k,{xs:"3",md:"3",children:Object(j.jsx)(o.G,{htmlFor:"text-description",className:"pl-1",children:"Follow Up ?"})}),Object(j.jsx)(o.k,{xs:"9",md:"9",children:Object(j.jsx)(o.eb,{color:"primary",name:"active",value:U,onChange:function(e){return q(e.target.checked)},variant:"opposite",shape:"pill"})})]}),Object(j.jsx)(w,{show:O,visitorId:t,setShow:x,setItems:R,setSelectedPet:A})]}),Object(j.jsxs)(o.M,{children:[Object(j.jsx)(o.e,{color:"danger",onClick:function(){return m(!1)},children:"Cancel"}),Object(j.jsx)(o.e,{color:"primary",onClick:function(){c({type:"addDoctorReceipt",payload:{pet:N,fee:E,appointmentDate:new Date,isFollowUp:U}})},children:"Submit"})]})]})]})},F=function(e){var t=e.visitorId,c=e.doctorFormVisibility,a=e.isDoctorVisitAdded,i=e.doctorsReceipt,r=e.dispatch;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(o.f,{children:[Object(j.jsxs)(o.j,{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("div",{children:"Doctor's Visit"}),Object(j.jsx)(o.eb,{className:"mr-1",color:"dark",shape:"pill",variant:"opposite",value:c,onChange:function(e){return r({type:"setDoctorFormVisibility",payload:e.target.checked})}})]}),c&&Object(j.jsx)(o.g,{children:a?Object(j.jsx)(f,{doctorsReceipt:i}):Object(j.jsx)(k,{visitorId:t,dispatch:r})})]})})},R=function(e,t){var c,i,r,n,o,s,l,d,j=t.type,p=t.payload;switch(j){case"setKeyword":return Object(a.a)(Object(a.a)({},e),{},{keyword:p});case"setItems":return Object(a.a)(Object(a.a)({},e),{},{items:p});case"setIsVisitorRecordAdded":return Object(a.a)(Object(a.a)({},e),{},{isVisitorRecordAdded:p});case"setVisitorsId":return Object(a.a)(Object(a.a)({},e),{},{visitorsId:p});case"setVisitorsRecord":return Object(a.a)(Object(a.a)({},e),{},{visitorRecord:Object(a.a)({},p)});case"handleChangeVisitorRecord":return Object(a.a)(Object(a.a)({},e),{},{visitorRecord:Object(a.a)(Object(a.a)({},e.visitorRecord),{},Object(h.a)({},p.target.name,p.target.value))});case"setReceiptFormVisibility":return Object(a.a)(Object(a.a)({},e),{},{receiptFormVisibility:p});case"setShowAddReceiptForm":return Object(a.a)(Object(a.a)({},e),{},{showAddReceiptForm:p});case"setDoctorFormVisibility":return Object(a.a)(Object(a.a)({},e),{},{doctorFormVisibility:p});case"setIsDoctorVisitAdded":return Object(a.a)(Object(a.a)({},e),{},{isDoctorVisitAdded:p});case"addItemInReceipt":var u={id:(null===(c=p.itemId)||void 0===c?void 0:c.value)||null,packageId:(null===(i=p.packageId)||void 0===i?void 0:i.value)||null,name:(null===(r=p.itemId)||void 0===r?void 0:r.label)||(null===(n=p.packageId)||void 0===n?void 0:n.label),category:p.categoryId.label,price:(null===(o=p.itemId)||void 0===o?void 0:o.price)||(null===(s=p.packageId)||void 0===s?void 0:s.price),qty:p.quantity,total:p.quantity*((null===(l=p.itemId)||void 0===l?void 0:l.price)||(null===(d=p.packageId)||void 0===d?void 0:d.price))};return Object(a.a)(Object(a.a)({},e),{},{receiptItems:[].concat(I(e.receiptItems),[u])});case"addDoctorReceipt":var m={pet:p.pet,fee:p.fee,appointmentDate:p.appointmentDate,isFollowUp:p.isFollowUp};return Object(a.a)(Object(a.a)({},e),{},{isDoctorVisitAdded:!0,doctorsReceipt:m});case"resetForm":return Object(a.a)(Object(a.a)({},e),{},{keyword:"",items:[],isVisitorRecordAdded:!1,visitorsId:null,visitorRecord:{emiratesId:"",name:"",email:"",contact:""},receiptFormVisibility:!1,showAddReceiptForm:!1,doctorFormVisibility:!1,isDoctorVisitAdded:!1,receiptItems:[],doctorsReceipt:{pet:null,fee:"",appointmentDate:null,isFollowUp:!1}});default:return e}},V={keyword:"",items:[],isVisitorRecordAdded:!1,visitorsId:null,visitorRecord:{emiratesId:"",name:"",email:"",contact:""},receiptFormVisibility:!1,showAddReceiptForm:!1,doctorFormVisibility:!1,isDoctorVisitAdded:!1,receiptItems:[],doctorsReceipt:{pet:null,fee:"",appointmentDate:null,isFollowUp:!1}};t.default=function(){var e=Object(s.g)(),t=n.a.useReducer(R,V),c=Object(i.a)(t,2),r=c[0],u=c[1],m=Object(d.a)({method:"GET"},{manual:!0}),b=Object(i.a)(m,2)[1];return n.a.useEffect((function(){r.keyword.length>0&&b({url:"https://app.aloropivetcenter.com/api/patients",params:{search:r.keyword}}).then((function(e){var t;u({type:"setItems",payload:((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[]).map((function(e){return{label:e.name,value:e}}))})}))}),[r.keyword,b]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(o.T,{children:Object(j.jsx)(o.k,{xs:"12",sm:"12",children:Object(j.jsxs)(o.f,{children:[Object(j.jsxs)(o.j,{children:["Visitor",Object(j.jsx)("small",{children:" Form"})]}),Object(j.jsxs)(o.g,{children:[Object(j.jsxs)(o.w,{row:!0,children:[Object(j.jsx)(o.k,{xs:"12",children:Object(j.jsx)(o.G,{className:"pt-1",htmlFor:"search",children:"Search"})}),Object(j.jsx)(o.k,{xs:"12",children:Object(j.jsx)(l.a,{name:"search",options:r.items,onInputChange:function(e){return u({type:"setKeyword",payload:e})},onChange:function(e){var t=e.value;u({type:"setVisitorsRecord",payload:{emiratesId:t.emiratesId,name:t.name,email:t.email,contact:t.contact}}),u({type:"setVisitorsId",payload:t.id}),u({type:"setIsVisitorRecordAdded",payload:!0})}})})]}),Object(j.jsx)(o.f,{children:Object(j.jsx)(o.g,{children:Object(j.jsx)(p,{isVisitorRecordAdded:r.isVisitorRecordAdded,visitorRecord:r.visitorRecord,dispatch:u})})}),r.isVisitorRecordAdded&&Object(j.jsxs)(o.T,{children:[Object(j.jsx)(o.k,{sm:"6",children:Object(j.jsx)(v,{receiptFormVisibility:r.receiptFormVisibility,showAddReceiptFormModal:r.showAddReceiptForm,receiptItems:r.receiptItems,dispatch:u})}),Object(j.jsx)(o.k,{sm:"6",children:Object(j.jsx)(F,{visitorId:r.visitorsId,doctorFormVisibility:r.doctorFormVisibility,isDoctorVisitAdded:r.isDoctorVisitAdded,doctorsReceipt:r.doctorsReceipt,dispatch:u})})]})]}),Object(j.jsx)(o.h,{children:Object(j.jsx)("div",{className:"d-flex",children:Object(j.jsxs)("div",{className:"w-50 ml-auto text-right",children:[Object(j.jsx)(o.e,{className:"w-25 mr-1",color:"danger",children:"Clear"}),Object(j.jsx)(o.e,{onClick:function(){r.isVisitorRecordAdded?function(){var t={patientId:r.visitorsId,appointment:r.isDoctorVisitAdded,checkUpPrice:r.doctorsReceipt.fee,description:"Order Receipt",followUp:r.doctorsReceipt.isFollowUp,itemIds:r.receiptItems.filter((function(e){return null!==e.id})).map((function(e){return e.id})),packageIds:r.receiptItems.filter((function(e){return null!==e.packageId})).map((function(e){return e.packageId}))};b({url:"https://app.aloropivetcenter.com/api/orders",method:"POST",data:t}).then((function(t){u({type:"resetForm",payload:null}),e.push("/visitors")}))}():b({url:"https://app.aloropivetcenter.com/api/patients",method:"POST",data:Object(a.a)({},r.visitorRecord)}).then((function(e){u({type:"setVisitorsId",payload:e.data.id}),u({type:"setIsVisitorRecordAdded",payload:!0})}))},className:"w-25",color:"primary",children:"Submit"})]})})})]})})})})}}}]);
//# sourceMappingURL=18.91a129b8.chunk.js.map