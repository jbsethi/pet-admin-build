(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[11],{722:function(e,t,c){"use strict";c.d(t,"c",(function(){return n})),c.d(t,"b",(function(){return r})),c.d(t,"a",(function(){return a}));var n=function(e){return new Date(e).toLocaleString()},r={convert:function(e){return e.constructor===Date?e:e.constructor===Array?new Date(e[0],e[1],e[2]):e.constructor===Number||e.constructor===String?new Date(e):"object"===typeof e?new Date(e.year,e.month,e.date):NaN},compare:function(e,t){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())?(e>t)-(e<t):NaN},inRange:function(e,t,c){return isFinite(e=this.convert(e).valueOf())&&isFinite(t=this.convert(t).valueOf())&&isFinite(c=this.convert(c).valueOf())?t<=e&&e<=c:NaN}},a=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}},723:function(e,t,c){"use strict";function n(e,t,c,n,r,a,i){try{var s=e[a](i),o=s.value}catch(l){return void c(l)}s.done?t(o):Promise.resolve(o).then(n,r)}function r(e){return function(){var t=this,c=arguments;return new Promise((function(r,a){var i=e.apply(t,c);function s(e){n(i,r,a,s,o,"next",e)}function o(e){n(i,r,a,s,o,"throw",e)}s(void 0)}))}}c.d(t,"a",(function(){return r}))},724:function(e,t,c){"use strict";c(1);var n=c(89),r=c(22);t.a=function(e){var t=e.keyword,c=void 0===t?"":t,a=e.changeKeyword,i=void 0===a?null:a,s=e.children;return Object(r.jsxs)(n.T,{className:"align-items-center justify-content-between pb-2",children:[Object(r.jsx)(n.l,{sm:"4",children:Object(r.jsx)(n.x,{className:"mb-0",children:Object(r.jsx)(n.B,{type:"text",name:"nf-text",placeholder:"Search Here..",autoComplete:"off",value:c,onChange:i,onKeyPress:i})})}),Object(r.jsx)(n.l,{sm:"4",className:"d-flex justify-content-end",children:s})]})}},857:function(e,t,c){"use strict";c.r(t);var n=c(82),r=c(1),a=c.n(r),i=c(720),s=c(724),o=c(725),l=c.n(o),d=c(723),j=c(195),u=c(63),h=c(194),m=c(719),b=c(89),p=c(22),x=function(e){var t=e.show,c=e.setShow,s=e.refetch,o=e.itemId,x=e.setEditId,O=Object(r.useContext)(h.a).addToast,v=a.a.useState([]),f=Object(n.a)(v,2),g=f[0],y=f[1],w=a.a.useState([]),N=Object(n.a)(w,2),T=N[0],C=N[1],I=a.a.useState({name:"",description:"",price:"",petTypeId:"",serviceId:"",active:!0}),S=Object(n.a)(I,2),k=S[0],E=S[1],F=Object(i.a)({url:m.a+"/items",method:"POST"},{manual:!0}),P=Object(n.a)(F,2),D=P[0].loading,G=P[1],A=function(e){E((function(t){return"active"===e.target.name?Object(u.a)(Object(u.a)({},t),{},Object(j.a)({},e.target.name,e.target.checked)):Object(u.a)(Object(u.a)({},t),{},Object(j.a)({},e.target.name,e.target.value))}))},L=a.a.useCallback(Object(d.a)(l.a.mark((function e(){var t,c,n,r,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G({url:m.a+"/services",method:"GET"});case 3:return r=e.sent,y((null===(t=r)||void 0===t||null===(c=t.data)||void 0===c?void 0:c.rows)||[]),e.next=7,G({url:m.a+"/pet-types/records/active",method:"GET"});case 7:if(r=e.sent,console.log(r),C((null===(n=r)||void 0===n?void 0:n.data)||[]),!o){e.next=15;break}return e.next=13,G({url:m.a+"/items/".concat(o),method:"GET"});case 13:r=e.sent,E({name:r.data.name,description:r.data.description,price:r.data.price,petTypeId:r.data.petTypeId,serviceId:r.data.serviceId,active:r.data.active});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),O({message:(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||"Error occured !"});case 20:case"end":return e.stop()}}),e,null,[[0,17]])}))),[G,o]);return a.a.useEffect((function(){t&&L()}),[t,L]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(b.K,{show:t,onClose:function(){return c(!1)},children:[Object(p.jsx)(b.N,{closeButton:!0,children:"Add Item"}),Object(p.jsx)(b.L,{children:D?Object(p.jsx)("div",{className:"py-5 text-center",children:"Loading Details ..."}):Object(p.jsx)(b.T,{children:Object(p.jsxs)(b.l,{className:"px-5 pt-4",children:[Object(p.jsxs)(b.x,{row:!0,children:[Object(p.jsx)(b.l,{md:"3",children:Object(p.jsx)(b.G,{className:"pt-1",htmlFor:"text-name",children:"Name"})}),Object(p.jsx)(b.l,{xs:"12",md:"9",children:Object(p.jsx)(b.B,{id:"text-name",name:"name",value:k.name,onChange:A,placeholder:"Enter Name for item"})})]}),Object(p.jsxs)(b.x,{row:!0,children:[Object(p.jsx)(b.l,{md:"3",children:Object(p.jsx)(b.G,{className:"pt-1",htmlFor:"text-price",children:"Price"})}),Object(p.jsx)(b.l,{xs:"12",md:"9",children:Object(p.jsx)(b.B,{id:"text-price",name:"price",value:k.price,onChange:A,placeholder:"Enter Price for item"})})]}),Object(p.jsxs)(b.x,{row:!0,children:[Object(p.jsx)(b.l,{md:"3",children:Object(p.jsx)(b.G,{className:"pt-1",htmlFor:"text-pet-type",children:"Pet Type"})}),Object(p.jsx)(b.l,{xs:"12",md:"9",children:Object(p.jsxs)(b.U,{custom:!0,name:"petTypeId",id:"text-pet-type",onChange:A,value:k.petTypeId,children:[Object(p.jsx)("option",{value:"0",children:"Select"}),T.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]}),Object(p.jsxs)(b.x,{row:!0,children:[Object(p.jsx)(b.l,{md:"3",children:Object(p.jsx)(b.G,{className:"pt-1",htmlFor:"text-service",children:"Service"})}),Object(p.jsx)(b.l,{xs:"12",md:"9",children:Object(p.jsxs)(b.U,{custom:!0,name:"serviceId",id:"text-service",onChange:A,value:k.serviceId,children:[Object(p.jsx)("option",{value:"0",children:"Select"}),g.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.displayName},e.id)}))]})})]}),Object(p.jsxs)(b.x,{row:!0,children:[Object(p.jsx)(b.l,{md:"3",children:Object(p.jsx)(b.G,{className:"pt-1",htmlFor:"text-description",children:"Description"})}),Object(p.jsx)(b.l,{xs:"12",md:"9",children:Object(p.jsx)(b.fb,{id:"text-description",name:"description",value:k.description,onChange:A,placeholder:"Enter Description ..."})})]}),Object(p.jsxs)(b.x,{row:!0,children:[Object(p.jsx)(b.l,{xs:"3",md:"3",children:Object(p.jsx)(b.G,{htmlFor:"text-description",children:"Active"})}),Object(p.jsx)(b.l,{xs:"9",md:"9",children:Object(p.jsx)(b.eb,{color:"primary",name:"active",checked:k.active,onChange:A,variant:"opposite",shape:"pill"})})]})]})})}),Object(p.jsxs)(b.M,{children:[Object(p.jsx)(b.f,{color:"secondary",onClick:function(){return c(!1),E({name:"",description:"",price:"",petTypeId:"",serviceId:"",active:!0}),void x(null)},children:"Cancel"}),Object(p.jsx)(b.f,{onClick:function(){if(!D){var e={data:Object(u.a)({},k)};o&&(e.url=m.a+"/items/".concat(o),e.method="PUT"),G(e).then((function(e){c(!1),E({name:"",description:"",price:"",petTypeId:"",serviceId:"",active:!0}),x(null),s()})).catch((function(e){O({message:e.response.data.message})}))}},className:"ml-1",color:"primary",children:D?"Loading":"Confirm"})]})]})})},O=c(722),v=["name","price",{key:"createdAt",label:"Registered"},"description","actions"];t.default=function(){var e=Object(r.useContext)(h.a),t=e.addToast,c=e.role,o=a.a.useState(!1),l=Object(n.a)(o,2),d=l[0],j=l[1],u=a.a.useState(""),f=Object(n.a)(u,2),g=f[0],y=f[1],w=a.a.useState(1),N=Object(n.a)(w,2),T=N[0],C=N[1],I=a.a.useState(1),S=Object(n.a)(I,2),k=S[0],E=S[1],F=a.a.useState(null),P=Object(n.a)(F,2),D=P[0],G=P[1],A=Object(i.a)({url:m.a+"/items",method:"GET",params:{pageNo:k}},{manual:!0}),L=Object(n.a)(A,2),B=L[0],K=B.data,R=B.loading,U=B.error,z=L[1],J=a.a.useCallback((function(){z().then((function(e){C(e.data.totalPages)}))}),[z]);return a.a.useEffect((function(){J()}),[J]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b.T,{children:Object(p.jsx)(b.l,{xs:"12",lg:"12",children:Object(p.jsxs)(b.g,{children:[Object(p.jsx)(b.k,{children:"Items"}),Object(p.jsx)(b.h,{children:Object(p.jsx)(b.p,{items:R||U?[]:(null===K||void 0===K?void 0:K.rows)||[],fields:v.filter((function(e){return"actions"!=e||"receptionist"!=c})),striped:!0,itemsPerPage:10,loading:R,overTableSlot:Object(p.jsx)(s.a,{keyword:g,changeKeyword:function(e){"Enter"===e.key?z({params:{search:g}}).catch((function(e){t({message:e.response.data.message})})):y(e.target.value)},children:Object(p.jsx)(b.f,{color:"primary",variant:"outline",className:"m-2 pl-3 pr-4",onClick:function(){return j(!0)},children:Object(p.jsx)("span",{className:"ml-1",children:"Add Item"})})}),underTableSlot:Object(p.jsx)(b.R,{activePage:k,pages:T,onActivePageChange:function(e){return E(e)}}),scopedSlots:{price:function(e){return Object(p.jsxs)("td",{children:[e.price," AED"]})},createdAt:function(e){return Object(p.jsx)("td",{children:Object(O.c)(e.createdAt)})},actions:function(e){return Object(p.jsx)("td",{children:"receptionist"!==c&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(b.f,{onClick:function(){return t=e.id,G(t),void j(!0);var t},color:"primary",size:"sm",className:"mr-1",children:"Edit"}),Object(p.jsx)(b.f,{onClick:function(){return t=e.id,void z({url:m.a+"/items/".concat(t),method:"DELETE"}).then((function(){J()}));var t},color:"danger",size:"sm",children:"Delete"})]})})}}})})]})})}),Object(p.jsx)(x,{show:d,setShow:j,refetch:z,itemId:D,setEditId:G})]})}}}]);
//# sourceMappingURL=11.d0288d61.chunk.js.map