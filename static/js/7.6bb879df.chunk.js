(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[7],{676:function(e,t,n){"use strict";function a(e,t,n,a,c,i,r){try{var s=e[i](r),o=s.value}catch(l){return void n(l)}s.done?t(o):Promise.resolve(o).then(a,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,i){var r=e.apply(t,n);function s(e){a(r,c,i,s,o,"next",e)}function o(e){a(r,c,i,s,o,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return c}))},711:function(e,t,n){},712:function(e,t,n){"use strict";n.r(t);var a=n(66),c=n(72),i=n(1),r=n.n(i),s=n(24),o=n(674),l=n(677),d=n.n(l),p=n(676),u=n(175),j=n(174),m=n(53),h=n(678),b=n(173),O=n(18),f=Object(s.i)((function(e){var t=e.match,n=e.show,l=e.setShow,f=e.details,x=(e.refetch,Object(s.g)()),v=Object(i.useContext)(b.a),w=v.role,g=v.addToast,I=r.a.useState(!1),N=Object(a.a)(I,2),k=N[0],y=N[1],P=r.a.useState(null),S=Object(a.a)(P,2),C=S[0],T=S[1],U=r.a.useState([]),E=Object(a.a)(U,2),F=E[0],A=E[1],G=r.a.useState([]),q=Object(a.a)(G,2),B=q[0],D=q[1],L=Object(o.a)({url:"https://app.aloropivetcenter.com/api/treatments",method:"POST"},{manual:!0}),R=Object(a.a)(L,2)[1],J=r.a.useState({statement:"",prescription:"",description:"",followUp:""}),z=Object(a.a)(J,2),H=z[0],K=z[1],M=function(e){K((function(t){return Object(m.a)(Object(m.a)({},t),{},Object(j.a)({},e.target.name,e.target.value))}))},V=r.a.useCallback(Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),!n||!f){e.next=8;break}return e.next=4,R({url:"https://app.aloropivetcenter.com/api/orders/".concat(f.orderId),method:"GET"});case 4:t=e.sent,T(t.data),K({statement:f.statement,prescription:f.prescription,description:f.description,followUp:""}),A((function(){return f.Recomendations.map((function(e,n){var a,c=!!((null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.Items)||[]).find((function(t){return t.itemId===e.itemId}));return{idx:n,value:e.itemId,label:e.Item.name,isAdded:c}}))}));case 8:if(!n||0!==B.length){e.next=13;break}return e.next=11,R({url:"https://app.aloropivetcenter.com/api/items/records/all?serviceId=3",method:"GET"});case 11:a=e.sent,D(a.data.map((function(e){return{label:e.name,value:e.id}})));case 13:y(!1);case 14:case"end":return e.stop()}}),e)}))),[B,n,f]);r.a.useEffect((function(){return V(),function(){T(null),A([])}}),[V]);var Q=F.map((function(e,t){return Object(O.jsxs)(c.T,{className:"align-items-center px-3 py-2",children:[Object(O.jsx)(c.k,{md:"1",children:t+1}),Object(O.jsx)(c.k,{children:Object(O.jsx)(h.a,{disabled:f,options:B,value:F[t],onChange:function(e){return function(e,t){A((function(n){return[].concat(Object(u.a)(n),[Object(m.a)({idx:t},e)])}))}(e,t)}})}),Object(O.jsx)(c.k,{md:"2",children:f&&!F[t].isAdded&&"doctor"!==w&&Object(O.jsx)(c.e,{color:"primary",size:"sm",onClick:function(){return function(e){var t={patientId:C.patientId,appointment:"1"===C.appointment,checkUpPrice:C.checkUpPrice,description:C.description,items:C.Items.map((function(e){return{itemId:e.itemId,quantity:e.quantity}})).concat([{itemId:e.value,quantity:1}]),packages:C.Packages.map((function(e){return{id:e.id,quantity:e.quantity}})),followUp:C.followUp};R({url:"https://app.aloropivetcenter.com/api/orders/".concat(f.orderId),method:"PUT",data:t}).then((function(e){V()})).catch((function(e){g({message:e.response.data.message})}))}(F[t])},children:"Add"})})]},t)}));return Object(O.jsxs)(c.K,{show:n,onClose:function(){return l(!1)},children:[Object(O.jsx)(c.N,{children:f?"Treatment Details":"New Prescription"}),Object(O.jsx)(c.L,{children:k?Object(O.jsx)("p",{className:"pt-3 text-center",children:"Loading Please wait !"}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(c.w,{children:[Object(O.jsx)(c.G,{htmlFor:"Statement",children:"Statement"}),Object(O.jsx)(c.B,{disabled:f,value:H.statement,name:"statement",onChange:M,id:"statement",placeholder:"Enter Statement"})]}),Object(O.jsxs)(c.w,{children:[Object(O.jsx)(c.G,{htmlFor:"prescription",children:"Prescription"}),Object(O.jsx)(c.B,{disabled:f,value:H.prescription,name:"prescription",onChange:M,id:"prescription",placeholder:"Enter Prescription"})]}),Object(O.jsxs)(c.w,{className:"py-3 m-0",children:[Object(O.jsx)(c.T,{className:"px-3 justify-content-between align-items-center",children:Object(O.jsx)(c.G,{htmlFor:"recomendation",children:"Recomendation"})}),Q.length>0&&Object(O.jsx)("section",{className:"py-2",children:Q})]}),Object(O.jsxs)(c.w,{children:[Object(O.jsx)(c.G,{htmlFor:"description",children:"Description"}),Object(O.jsx)(c.fb,{disabled:f,value:H.description,onChange:M,name:"description",id:"description",placeholder:"Enter Description"})]}),Object(O.jsxs)(c.w,{children:[Object(O.jsx)(c.G,{htmlFor:"followUp",children:"Follow up ?"}),Object(O.jsx)(c.B,{disabled:f,type:"number",value:H.followUp,name:"followUp",onChange:M,id:"followUp",placeholder:"Enter follow Up day"})]})]})}),Object(O.jsxs)(c.M,{children:[Object(O.jsx)(c.e,{color:"danger",onClick:function(){return l(!1)},children:"Cancel"}),Object(O.jsx)(c.e,{color:"primary",onClick:function(){return x.replace({pathname:"/visitors/".concat(t.params.id,"/orders"),state:{orderId:f.orderId}})},children:"View Invoice"})]})]})})),x=function(e){var t=e.match,n=r.a.useState(null),i=Object(a.a)(n,2),s=i[0],l=i[1],d=r.a.useState(!1),p=Object(a.a)(d,2),u=p[0],j=p[1],m=r.a.useState([]),h=Object(a.a)(m,2),b=h[0],x=h[1],v=Object(o.a)({url:"https://app.aloropivetcenter.com/api/treatments/all/pets",method:"POST"},{manual:!0}),w=Object(a.a)(v,2),g=w[0].loading,I=w[1];return r.a.useEffect((function(){I({data:{petId:t.params.petId}}).then((function(e){var t;x((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[])}))}),[I,t.params.petId]),Object(O.jsxs)(c.f,{children:[Object(O.jsx)(c.j,{children:Object(O.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:Object(O.jsx)("div",{className:"font-lg",children:"Pet Previous History"})})}),Object(O.jsx)(c.g,{className:"p-0",children:Object(O.jsx)(c.o,{loading:g,fields:["statement","description","createdAt"],items:b,onRowClick:function(e){return function(e){l(e),j(!0)}(e)},striped:!0})}),Object(O.jsx)(f,{show:u,setShow:function(e){j(e),e||l(null)},details:s})]})},v=n(52),w=(n(711),Object(s.i)((function(e){e.match;var t=e.pet;return Object(O.jsx)("div",{className:"petTab",children:Object(O.jsx)(v.c,{to:{pathname:"/visitors/".concat(t.patientId,"/treatments/").concat(t.id)},children:Object(O.jsx)(c.f,{className:"m-0",children:Object(O.jsx)(c.g,{className:"p-3",children:Object(O.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(O.jsx)("p",{className:"m-0",children:t.name}),Object(O.jsx)("p",{className:"m-0",children:t.createdAt})]})})})})})}))),g=function(e){return e.pets.map((function(e){return Object(O.jsx)(w,{pet:e},e.id)}))};t.default=function(e){var t=e.match,n=r.a.useContext(b.a).addToast,i=Object(s.g)(),l=r.a.useState([]),d=Object(a.a)(l,2),p=d[0],u=d[1],j=Object(o.a)({url:"https://app.aloropivetcenter.com/api/pets/all/patients",method:"POST"},{manual:!0}),m=Object(a.a)(j,2),h=m[0].loading,f=m[1];return r.a.useEffect((function(){f({data:{patientId:t.params.id}}).then((function(e){var n,a,c,r;u(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.rows.map((function(e){return{id:e.id,patientId:t.params.id,name:e.name,createdAt:e.createdAt}}))),(null===e||void 0===e||null===(a=e.data)||void 0===a||null===(c=a.rows)||void 0===c?void 0:c.length)>0&&i.replace("/visitors/".concat(t.params.id,"/treatments/").concat(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.rows[0].id))})).catch((function(e){var t,a;n({message:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Error occured try again later !"})}))}),[f,t.params.id,i]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(c.T,{children:[Object(O.jsx)(c.k,{md:"4",children:Object(O.jsxs)(c.f,{children:[Object(O.jsx)(c.j,{children:Object(O.jsx)("p",{className:"font-lg m-0",children:"Pets"})}),Object(O.jsx)(c.g,{className:"p-0",children:h?Object(O.jsx)("p",{className:"pt-3 text-center",children:"Loading ..."}):Object(O.jsx)(g,{pets:p})})]})}),Object(O.jsxs)(c.k,{children:[Object(O.jsx)(s.b,{path:"/visitors/:id/treatments",exact:!0,render:function(){return Object(O.jsx)("p",{className:"p-5 text-center",children:"Please select Pet to view details."})}}),Object(O.jsx)(s.b,{path:"/visitors/:id/treatments/:petId",component:x})]})]})})}}}]);
//# sourceMappingURL=7.6bb879df.chunk.js.map